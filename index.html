<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Welcome to Dexter</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>


    <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic' rel='stylesheet' type='text/css'>

    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="shortcut icon" href="/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
    <meta name="msapplication-config" content="/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-60850357-3', 'auto');
    ga('send', 'pageview');
    </script>   
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
		<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			 viewBox="-89.5 344.1 200.3 39.5" style="enable-background:new -89.5 344.1 200.3 39.5; padding: 25px 15px 10px 15px; width: 60%; text-align: center" xml:space="preserve">
		<style type="text/css">
			.st0{fill:#ffffff;}
		</style>
		<g>
			<path class="st0" d="M-75.9,354.5V345c0-0.5-0.4-0.9-0.9-0.9h-11.8c-0.5,0-0.9,0.4-0.9,0.9v9.5c0,0.5,0.4,0.9,0.9,0.9h11.8
				C-76.3,355.4-75.9,355-75.9,354.5z"/>
			<path class="st0" d="M-68,347.8h-4.3c-0.5,0-0.9,0.4-0.9,0.9l0,7.8c0,0.5,0.4,0.9,0.9,0.9h3.4c4.3,0,7.5,3.1,7.5,9
				c0,5.9-5.7,7.7-7.8,7.7H-73c-0.5,0-0.9-0.4-0.9-0.9V359c0-0.5-0.4-0.9-0.9-0.9l-8.5,0c-0.5,0-0.9,0.4-0.9,0.9v23.7
				c0,0.5,0.4,0.9,0.9,0.9h15.9c3.2,0,16.8-1.9,16.8-18.4C-50.6,348.6-66.5,347.8-68,347.8z"/>
			<path class="st0" d="M44.4,347.9h-24c-0.3,0-0.7,0.2-0.8,0.5l-4.7,7.7c-0.2,0.3-0.1,0.7,0.2,0.9c0.1,0.1,0.3,0.1,0.5,0.1h8.1
				c0.5,0,1,0.4,1,1v24.5c0,0.5,0.4,1,1,1h8.6c0.5,0,1-0.4,1-1v-24.5c0-0.5,0.4-1,1-1h8.2c0.5,0,1-0.4,1-1v-7.3
				C45.4,348.4,45,347.9,44.4,347.9z"/>
			<path class="st0" d="M-20.7,347.8h-26.8c-0.5,0-0.9,0.4-0.9,0.9v33.9c0,0.5,0.4,0.9,0.9,0.9h26.8c0.5,0,0.9-0.4,0.9-0.9v-7.2
				c0-0.5-0.4-0.9-0.9-0.9h-16.6c-0.5,0-0.9-0.4-0.9-0.9v-2.5c0-0.5,0.4-0.9,0.9-0.9h9.3c0.5,0,0.9-0.4,0.9-0.9v-7.6
				c0-0.5-0.4-0.9-0.9-0.9h-9.3c-0.5,0-0.9-0.4-0.9-0.9v-2.6c0-0.5,0.4-0.9,0.9-0.9h16.6c0.5,0,0.9-0.4,0.9-0.9v-6.9
				C-19.8,348.2-20.2,347.8-20.7,347.8z"/>
			<path class="st0" d="M76.1,347.8H49.4c-0.5,0-0.9,0.4-0.9,0.9v33.9c0,0.5,0.4,0.9,0.9,0.9h26.8c0.5,0,0.9-0.4,0.9-0.9v-7.2
				c0-0.5-0.4-0.9-0.9-0.9H59.6c-0.5,0-0.9-0.4-0.9-0.9v-2.5c0-0.5,0.4-0.9,0.9-0.9h9.3c0.5,0,0.9-0.4,0.9-0.9v-7.6
				c0-0.5-0.4-0.9-0.9-0.9h-9.3c-0.5,0-0.9-0.4-0.9-0.9v-2.6c0-0.5,0.4-0.9,0.9-0.9h16.6c0.5,0,0.9-0.4,0.9-0.9v-6.9
				C77,348.2,76.6,347.8,76.1,347.8z"/>
			<path class="st0" d="M110.7,382.2l-6.6-11.1c-0.3-0.5-0.1-1,0.4-1.2c1.8-0.9,5.8-3.6,5.8-9.7c0-10.3-10.4-12.2-12.5-12.2H81
				c-0.5,0-0.9,0.4-0.9,0.9v33.8c0,0.5,0.4,0.9,0.9,0.9h8.5c0.5,0,0.9-0.4,0.9-0.9v-10c0-0.5,0.4-0.9,0.9-0.9h1.9
				c0.3,0,0.6,0.2,0.8,0.5l5.7,10.8c0.1,0.3,0.5,0.5,0.8,0.5h9.4C110.6,383.5,111,382.8,110.7,382.2z M95.8,363.1h-4.6
				c-0.5,0-0.9-0.4-0.9-0.9v-4.4c0-0.5,0.4-0.9,0.9-0.9h4.3c3.2,0,4.2,1,4.2,3.4C99.7,362.5,97.3,363.1,95.8,363.1z"/>
			<path class="st0" d="M6.4,366.1c-0.2-0.3-0.2-0.6,0-0.9l9.5-16c0.3-0.6-0.1-1.4-0.8-1.4H5.4c-0.3,0-0.6,0.2-0.8,0.5l-3.9,7.3
				c-0.3,0.6-1.2,0.6-1.6,0l-3.7-7.3c-0.1-0.3-0.5-0.5-0.8-0.5h-10c-0.7,0-1.1,0.7-0.8,1.3l9.1,15.9c0.2,0.3,0.1,0.6,0,0.9l-9.6,16.2
				c-0.3,0.6,0.1,1.4,0.8,1.4h9.9c0.3,0,0.6-0.2,0.8-0.5l3.9-7.7c0.3-0.6,1.2-0.7,1.6,0l4.4,7.8c0.2,0.3,0.5,0.5,0.8,0.5h9.9
				c0.7,0,1.1-0.8,0.8-1.4L6.4,366.1z"/>
		</g>
		</svg>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="quickstart">Quickstart</h1>

<p>Before getting started, you’ll need Node.js and git installed.<br/></p>

<p><strong>For OSX:</strong> <a href="https://nodejs.org/dist/v4.2.1/node-v4.2.1.pkg">Node.js</a> | <a href="https://git-scm.com/download/mac">Git</a> </p>

<p><strong>For Linux:</strong> <a href="https://nodejs.org/en/download/">Node.js</a> | <a href="https://git-scm.com/download/linux">Git</a> </p>

<p><strong>For Windows:</strong> You’ll need to use a Linux virtual machine and follow the links above. <a href="https://www.virtualbox.org/manual/ch01.html#intro-installing" target="_blank">Here’s a guide</a> on how to go about that.</p>

<p><strong>Step 1</strong><br>
<block class="highlight shell">
 <code>
  <span class="gp">$ </span>npm install -g rundexter
 </code>
</block></p>

<p><strong>Step 2a</strong> <br/>
<block class="highlight shell">
 <code>
  #If you don’t have a key, or are unsure, run this<br>
  #warning: if prompted to overwrite, choose “no.”<br/>
  <span class="gp">$ </span>ssh-keygen -f ~/.ssh/id_rsa -N &quot;&quot;
 </code>
</block></p>

<p><strong>Step 2b</strong> <br/>
<block class="highlight shell">
 <code>
  <span class="gp">$ </span>dexter login [username or email]
 </code>
</block></p>

<p><strong>Step 3</strong><br/>
<block class="highlight shell">
 <code>
  <span class="gp">$ </span>dexter create “my first module”
 </code>
</block></p>

<p><strong>Step 4</strong><br/>
<block class="highlight shell">
 <code>
  <span class="gp">$ </span>git commit -am “my first edit”
 </code>
</block></p>

<p><strong>Step 5</strong><br/>
<block class="highlight shell">
 <code>
  <span class="gp">$ </span>dexter push
 </code>
</block></p>

<p><strong>Step 6</strong><br/>
    Congrats! You’ve created your first module. It’s in <code class="prettyprint">./my-first-module</code> Check out <code class="prettyprint">meta.json</code> and <code class="prettyprint">index.js</code> to get started. For anything else, let&rsquo;s get started, shall we?</p>

          <h1 id="getting-started">Getting Started</h1>

<p>Dexter is a platform that makes it easy for developers to connect third-party APIs and build apps that automate your digital life. Everyday we use a handful of tools that do one thing and do it well, whether that’s ordering lunch or messaging the office a meme. However, more complex tasks require a combination of different solutions. Dexter is here to simplify connecting these services. With Dexter, you can connect the web the way you want.</p>

<p>To get started, take the walkthrough that is presented automatically on your first login, or by clicking your name on the right side of the navigation bar and choosing walkthrough from the subsequent drop down. </p>

<h2 id="detailed-walkthrough">Detailed Walkthrough</h2>

<p>The walkthrough gives you the basic instructions as you click through, but here&rsquo;s some more info in case you get stuck, confused, or just want to know more: </p>

<ol>
<li><p><strong>Create a New App</strong> - Dexter is both for builders and consumers. We start with the building. Click the new app button on the top right of your screen. <img src="/images/screenshots/01-rounded.png" class="image-shadow">  </p></li>
<li><p><strong>Name Your App</strong> - The tutorial autopopulates the title and description field with the details of the app we&rsquo;re going to build: a <a href="http://www.google.com/search?q=define:bookmarklet" target="_blank">bookmarklet</a> that sends the current url to your mobile phone via text message so that you can take it with you on the road! <img src="/images/screenshots/02-rounded.png" class="image-shadow">  </p></li>
<li><p><strong>Place Your First Trigger</strong> - Triggers are actions performed in the outside world that tell Dexter to run the app. The way we notify the workflow about a trigger is to drag it onto the light gray bar at the top of the canvas. That’s our trigger bar. Think of it as the app&rsquo;s starting line. In this tutorial, our trigger is a <a href="http://www.google.com/search?q=define:bookmarklet" target="_blank">bookmarklet</a>. When clicked in a user&rsquo;s bookmark bar, it will send the current URL to their mobile device in an SMS. <img src="/images/screenshots/03-rounded.png" class="image-shadow">  </p></li>
<li><p><strong>Place Your First Module</strong> - A module does the heavy lifting. It takes the data from the previous step(s) – in this case the bookmarklet – and acts on it. For our first app we want to send ourselves a text message. How is that done? First, we drag the Dexter SMS module onto the canvas. Next, drag the orange outlet on the bookmarklet to the input of the Dexter SMS step. <img src="/images/screenshots/04-rounded.png" class="image-shadow">  </p></li>
<li><p><strong>Connect The Data</strong> - The last step is telling Dexter how the data moves in between steps. To do this, we click the configure button and bring up the configure panel. 
<img src="/images/screenshots/05-rounded.png" class="image-shadow"><br>
Each module has outputs and inputs. In this case the bookmarklet module outputs the URL of the page you&rsquo;re on. The Dexter SMS module accepts a phone number and a message as input. In order to tell the Dexter app that we want to send the URL from the bookmarklet step to the dexter sms step, we connect them. And that&rsquo;s it you&rsquo;re done! 
<img src="/images/screenshots/07-rounded-v2.png" class="image-shadow"><br>
There are a few details we&rsquo;re leaving out and for the uber curious, here they are: </p>

<ol>
<li>You’ll notice some radio buttons just below the input titles on the right sidebar. Here is where you can choose from an array of input methods: 
  <p><strong>User Defined</strong> - If this is selected, a user will define the input when they go to use the app. This happens during their configuration steps.</p>
  <p><strong>Mapping</strong> - If this is selected, the input will be whatever output you grab, drag, and drop to the step. </p> 
  <p><strong>Literal</strong> - If this is selected, the input will be whatever you type into the provided field that will appear below the dropdown. NOTE: If you lead your input with a &ldquo;=&rdquo; the field can take raw JavaScript.</p></li>
<li>The left panel shows all the data you can grab. In this simplistic example we only have the data from the bookmarklet available, but as you add more steps to your apps you&rsquo;ll get to toggle where the source data is coming from. </li>
</ol></li>
<li><p><strong>Use Your App</strong> - Click the Use App button on the main nav and you&rsquo;ll get taken to your share page. This page is publically accessible and anyone can use your app, but you&rsquo;re the only one with the rights to edit it. Let&rsquo;s test it out. </br></br>Click the “Use this App” button. This will take us through the configuration mode of our app. Remember how we set the Phone Number to be user provided when building the application? Well, as a result, the wizard prompts us for the phone number here. Go ahead and enter your phone number and hit “Finish.” Once that’s done, you’ll see some new usage instructions for your app. Drag the button to your bookmarklet bar and give it a click. You should get a text message with a link to the page that you’re on! </p>

<p><img src="/images/screenshots/11-rounded.png" class="image-shadow">  </p></li>
</ol>

<p>Congratulations on building your first app! You’ve just scratched the surface of what can be built on Dexter. Keep reading for information to help you build a more robust product. </p>

<h1 id="what-is-a-dexter-app">What Is A Dexter App?</h1>

<p><img src="/images/illustrations/illustrated-editor.png" class="image-shadow"></p>

<p>A Dexter app is a collection of JavaScript modules arranged and connected in a meaningful way within the Dexter Editor. When we drag a module onto the canvas, we say that we are instantiating that module, or forming a <em>Step</em> in our application.</p>

<p><img src="/images/illustrations/module-v-step.png"></p>

<h2 id="steps">Steps</h2>

<p>Steps are arranged by connecting one step to the next in the sequential order that data should be processed. In Dexter terms, we call this sequence a <em>Stream</em>, which we cover in greater detail in the next section.</p>

<p><img src="/images/illustrations/stream-illustration.png" class="image-shadow"></p>

<p>One step stands out from the rest. This step is called the <strong>Trigger step</strong>. Triggers allow events outside of Dexter communicate with your app, and kick off a <em>Stream</em>. In its simplest form it is a URL that any external app can access via a <code class="prettyprint">POST</code> request with arbitrary data that initiates the request. Dexter has some common triggers built-in (and we will add more regularly). Still, for any custom needs, you can always use the webhook trigger to pass in any type of data that you like. </p>

<h2 id="streams">Streams</h2>

<p>A stream begins with a trigger step and is followed by one or more process steps. A stream does not have any formal termination point, but an execution of any given stream will complete when there are no more steps left. An app can have multiple streams, where each Stream is started by its own Trigger.</p>

<h2 id="module-types">Module Types</h2>

<p>There are three types of modules in Dexter:</p>

<ol>
<li><p><strong>Core modules</strong> <br/>
There are some cases where the simplistic behavior of modules present a challenge to building a fully featured app. Core modules provide some special abilities that help you enhance basic modules . Dexter will continually expand its Core Module offering, but for now here is what is available (updated 10/20):  </p>

<p><strong><em>Queue</em></strong> - Sometimes while building a Dexter app you want to collect information that you’re not ready to act on yet. For example — Let’s say you want to store a bunch of URLs from the Bookmarklet Trigger, but you don’t want to do anything with them until a Timer Trigger is activated later. The Queue step lets you stash that data for later use. The Queue step takes a single parameter, <code class="prettyprint">class_name</code>, which is the name that you’ll reference in your Fetch step when you are ready to use it.  </p>

<p><strong><em>Fetch</em></strong> - The fetch module is queues partner, it takes one parameter, <code class="prettyprint">class_name</code>, which tells Dexter which queued up data you want to retrieve. After a fetch step is executed all downstream steps will have access to the steps upstream of a queue with matching names. </p>

<p><strong><em>Switch</em></strong> - Sometimes in the course of building an app you want to execute steps conditionally. The switch step enables this by allowing you to specify up to 5 different conditions and branching a stream at a given point. </p></li>
<li><p><strong>Dexter modules</strong> <br/>
These are the Dexter-blessed, built-in tools of the Dexter app ecosystem. They&rsquo;re available to every power user and developer in Dexter, and cover a broad range of behaviors.</p></li>
<li><p><strong>User modules</strong> <br/>
User modules are modules you&rsquo;ve made for your own apps. You build them with the same tools we&rsquo;ve used to build the vast library of Dexter modules, and you can use them the same in the App editor. The only difference between User modules and Dexter modules lies in distribution: only <em>you</em> can use your user modules.</p></li>
</ol>

<h2 id="authentication-amp-authorization">Authentication &amp; Authorization</h2>

<p>Every Dexter app execution is associated with a Dexter user account. For anonymous-mode use cases (e.g., a Slack slash command), Dexter provides “Execute As” functionality. By choosing “Owner” from the dropdown, all URLs exposed by a Dexter app trigger will append a restricted api key that allows the executing user to invoke the app without having Dexter credentials. The user context, while the app is running, will be that of the app owner — the user who configured the app.</p>

<p><img src="/images/screenshots/execute-as.png" class="image-shadow"></p>

<p>The API keys can be generated/regenerated from every User’s account page. </p>

          <h1 id="sdk-overview">SDK Overview</h1>

<p>Dexter is a completely open system. Our modules are constructed from open tools, and all our module code is open source. Even the Dexter runtime is open to you.  Anyone can build and contribute new modules via our client tools.  Are we missing some functionality you need?  Create a completely new module and upload it to Dexter for your use.  Is one of our modules <em>almost</em>, but not exactly what you&rsquo;re looking for?  Fork the module, update its functionality, and upload it as your own.</p>

<p>Together with the Dexter community, our goal is to build modules that cover a broad range of integrations with third party services, like sending a Slack message, adding a song to a Spotify playlist, archiving an item in Gmail, and more!  If you&rsquo;ve created a module that covers such a service, <a href="mailto:support@rundexter.com" target="_blank">let us know</a>, and we&rsquo;ll work with you to make it available to the community at large.</p>

<h2 id="how-it-works">How it works</h2>

<p>The Dexter SDK lets you create your own module, which is just a slightly enhanced Node.js library: it only requires a dedicated Dexter entry point and explicit documentation of inputs and outputs.  Otherwise you can follow your normal Node.js development process.</p>

<p>When you&rsquo;re done, you push your code into Dexter using our git server. You can send the code to Dexter via</p>

<p><code class="prettyprint">dexter push</code> or <code class="prettyprint">git push dexter master</code> </p>

<p>Once it&rsquo;s in our system, it&rsquo;ll show up in the App editor as another module for you to use in your “User Modules” panel. You&rsquo;ll be able to wire it up however you want and run it alongside the built-in modules, and there&rsquo;s no limit on how many Dexter modules you can create and use.</p>

<h2 id="setting-up-your-environment">Setting Up Your Environment</h2>
<pre class="highlight shell"><code><span class="c"># install the Dexter client</span>
<span class="gp">$ </span>npm install rundexter -g
</code></pre>

<p>To get started you need to have a working installation of <a href="https://nodejs.org" target="_blank">Node.js</a>. We have certified the Dexter client tools for use in recent versions up to <code class="prettyprint">4.1.2</code>, however, the modules need to be executable in AWS Lambda’s <a href="http://docs.aws.amazon.com/lambda/latest/dg/current-supported-versions.html" target="_blank">current Node.js infrastructure</a>.</p>

<h2 id="log-in">Log in</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter login <span class="o">{</span> your email <span class="o">}</span>
<span class="c"># Enter your password when prompted</span>
</code></pre>

<p>Before you do anything, you&rsquo;ll need to log in with your Dexter credentials. That lets us know who you are, so we can make the next steps happen.</p>

<h2 id="make-a-key">Make a key</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>ssh-keygen -f ~/.ssh/id_rsa -N <span class="s2">""</span>
</code></pre>

<p>You’ll need to have an SSH key — either RSA or DSA. 
<aside class="notice">
You might already have one. They’re probably in ~/.ssh/ and called id_rsa and id_rsa.pub.
</aside></p>

<p>If you don’t have one, make one now. You can run the given sample code to create a key, and <a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys">read more on the subject</a> if you&rsquo;re interested.</p>

<h2 id="send-your-key">Send your key</h2>
<pre class="highlight shell"><code><span class="c"># You can pass a path to a specific key here if you'd like</span>
<span class="gp">$ </span>dexter add_key
<span class="c"># Make sure we got it!</span>
<span class="gp">$ </span>dexter list_keys
</code></pre>

<p>In order to be able to push your code to us, you’ll have to register your SSH key with us. We’ll use your default key if you have one, or you can give us a specific key instead. You can also register more than one key (on this machine or multiple machines) if you’d like.</p>

<h1 id="sdk-reference">SDK Reference</h1>

<h2 id="authentication">Authentication</h2>

<h3 id="dexter-login">dexter login</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter login code@rundexter.com
Password: <span class="k">****</span>
Add your public key <span class="k">for </span>GIT access? <span class="o">(</span>yes<span class="o">)</span> no
If you change your mind, you can always add it later
dexter add_key &lt;keyname&gt;<span class="o">(</span>optional<span class="o">)</span> Add an SSH key to the system
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_required</td>
<td>true</td>
<td>Your email</td>
</tr>
</tbody></table>

<p>Log into your Dexter account using your email and password.</p>

<h3 id="dexter-add_key">dexter add_key</h3>

<blockquote>
<p>Example: Default key</p>
</blockquote>
<pre class="highlight shell"><code><span class="c">#You can pass a path to a specific key here if you'd like</span>
<span class="gp">$ </span>dexter add_key
Your key is now available on dexter!
<span class="c">#Make sure we got it</span>
<span class="gp">$ </span>dexter list_keys
</code></pre>

<blockquote>
<p>Example: Custom key</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter add_key ~/dexter.rsa.pub
Your key is now available on dexter!
Make sure your .ssh/config is <span class="nb">set </span>to use this key <span class="k">for </span>git.rundexter.com
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>path</td>
<td>false</td>
<td>Path to the key file</td>
</tr>
</tbody></table>

<p>Add a public ssh key file to the system. This file will be used to authenticate your access to the Dexter deployment servers when you publish code.</p>

<p>If left out, Dexter will first look for a file in <code class="prettyprint">~/.ssh/id_rsa.pub</code>, then in <code class="prettyprint">~/.ssh/id_dsa.pub</code>.</p>

<h3 id="dexter-remove_key">dexter remove_key</h3>

<blockquote>
<p>Example: Single match</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter remove_key 3792y+
Matching keys removed: 1
</code></pre>

<blockquote>
<p>Example: Multiple matches (error)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter remove_key AAA
Request failed: More than one key was found that matches this query - please be more specific
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pattern</td>
<td>true</td>
<td>A string pattern found in the key you want to delete</td>
</tr>
</tbody></table>

<p>Remove a key from Dexter. The provided pattern can exist anywhere in the key, or it can be the entire key. Use the <code class="prettyprint">dexter list_keys</code> to view your keys.</p>

<h3 id="dexter-list_keys">dexter list_keys</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter list_keys
ssh-rsa AAA.........82Fregr<span class="o">=</span> dexter@rundexter.com

ssh-dsa AAA.........38eeer2<span class="o">=</span> dexter@rundexter.com
</code></pre>

<p>Show all the keys you&rsquo;ve registered with rundexter.com</p>

<h2 id="module-operations">Module Operations</h2>

<h3 id="dexter-init">dexter init</h3>

<blockquote>
<p>Example (this folder)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter init
Initializing Dexter remote <span class="k">in</span> /home/dexter/projects/my-dexter-module
Your dexter remote is ready
<span class="gp">$ </span>git remote -v
dexter  git@git.rundexter.com:/my-dexter-module <span class="o">(</span>fetch<span class="o">)</span>
dexter  git@git.rundexter.com:/my-dexter-module <span class="o">(</span>push<span class="o">)</span>
</code></pre>

<blockquote>
<p>Example (another folder)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter init /srv/app/dexter/module
Initializing Dexter remote <span class="k">in</span> /srv/app/dexter/module
Your dexter remote is ready
<span class="gp">$ </span>git remote -v
dexter  git@git.rundexter.com:/server-dexter-module <span class="o">(</span>fetch<span class="o">)</span>
dexter  git@git.rundexter.com:/server-dexter-module <span class="o">(</span>push<span class="o">)</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>path</td>
<td>false</td>
<td>The path to the git instance</td>
</tr>
</tbody></table>

<p>Set up an existing git repository for use with the dexter command-line tool. So long as the target directory <em>looks</em> like a dexter module (i.e. it has valid package and meta json files), init will create a remote named &ldquo;dexter&rdquo; for you.</p>

<p>This gets called automatically when you <code class="prettyprint">dexter create</code> a module, but is useful if you want to enable an existing module to work with Dexter.  In that case, you need to add a <code class="prettyprint">meta.json</code> file before you can run <code class="prettyprint">dexter init</code>.</p>

<h3 id="dexter-create">dexter create</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter create foobar
Initializing project as Dexter DocGuy <span class="o">(</span>code@rundexter.com<span class="o">)</span>
Created repo <span class="k">in</span> /home/dexter/foobar
lodash@3.10.1 node_modules/lodash
Added .gitignore
Added README.md
Added fixtures/default.js
Added fixtures/env.example.js
Added form/README.md
Added form/checkout.form
Added form/run.form
Added form/settings.form
Added index.js
Added meta.json
Added package.json
Created initial commit <span class="o">[</span>Oid 5e0536cebca0811079d4f3ec87f940839854cca4]
Initializing Dexter remote <span class="k">in</span> /home/dexter/foobar
Your dexter remote is ready
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>The name of the new Dexter module</td>
</tr>
</tbody></table>

<p>Create a skeleton for a new Dexter module. The following things happen:</p>

<p>1. A local git repository is created for the module with some scaffolding code added as a first commit</p>

<p>2. The dexter remote is configured</p>

<p>Note that your code won&rsquo;t show up in the Dexter App Editor until you <code class="prettyprint">dexter push</code>.</p>

<h3 id="dexter-run">dexter run</h3>

<blockquote>
<p>Example (default)</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># runs fixtures/default.js</span>
<span class="gp">$ </span>dexter run
<span class="o">{</span>
    <span class="s2">"foo"</span>: <span class="s2">"bar"</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Example (custom)</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># runs fixtures/barWithBaz.js</span>
<span class="gp">$ </span>dexter run barWithBaz
<span class="o">{</span>
    <span class="s2">"bar"</span>: <span class="s2">"baz"</span>
<span class="o">}</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>The name of the fixture to run</td>
</tr>
</tbody></table>

<p>Execute the function using a built-in fixture. Every Dexter module is created with a default fixture which is used if you don&rsquo;t explicitly identify which fixture to run.</p>

<h3 id="dexter-push">dexter push</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter push
Adding your module to Dexter...
Counting objects: 13, <span class="k">done</span>.
Delta compression using up to 4 threads.
Compressing objects: 100% <span class="o">(</span>11/11<span class="o">)</span>, <span class="k">done</span>.
Writing objects: 100% <span class="o">(</span>13/13<span class="o">)</span>, 3.21 KiB | 0 bytes/s, <span class="k">done</span>.
Total 13 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
<span class="gp">---&gt; </span>Processing push
<span class="gp">---&gt; </span>Sending to your environment
<span class="gp">---&gt; </span>Push processed!
<span class="gp">---&gt; </span>Success! Your module is now available <span class="k">in </span>the Dexter Editor!
To git@git.beta.rundexter.com:/foobar
 <span class="k">*</span> <span class="o">[</span>new branch]      master -&gt; master
</code></pre>

<p>Push your module to Dexter. This will update your code on our servers and deploy it for use by your Dexter App Editor.</p>

<aside class="notice">You must first commit any changes in your working directory using “git commit” before you can push to Dexter.</aside>

<p>Deployment is tied to your module’s version number. For example, let’s say you do the following:</p>

<p>1. Create a module foobar at version 0.1</p>

<p>2. Add foobar to an App called Hello World.</p>

<p>3. Update foobar by with a new &ldquo;baz&rdquo; function and bump the version to 0.2</p>

<p>4. Add foobar to an App called Welcome Universe.</p>

<p>When this process is complete, &ldquo;Hello World&rdquo; will still be using foobar 0.1, and &ldquo;Welcome Universe&rdquo; will be using 0.2. You would have to explicitly update &ldquo;Hello World&rdquo; in order for it to start using foobar 0.2.</p>

          <h1 id="tutorial">Tutorial</h1>

<h2 id="goal">Goal</h2>

<p>Let&rsquo;s look at how to create a non-trivial module for Dexter.  The goal of this module will be to consume an RSS feed and to apply an optional text filter against the content.  In the process, we&rsquo;ll take advantage of some third-party tools, figure out how to deal with variable inputs, and learn how to deal with errors.  Let&rsquo;s get started!</p>

<h2 id="phase-0-preparation">Phase 0: Preparation</h2>

<p>Before we get started, you should make sure the following things are true:</p>

<ol>
<li>You&rsquo;ve signed up at <a href="https://rundexter.com" target="_blank">https://rundexter.com</a></li>
<li>You&rsquo;ve installed the <a href="#sdk-overview">sdk</a></li>
<li>You&rsquo;ve successfully added a key to your environment</li>
<li>You&rsquo;ve got a <em>basic</em> understanding of <a href="http://nodeguide.com/beginner.html">Node.js</a></li>
<li>You&rsquo;re ready to build cool things!</li>
</ol>

<p>If any of the above steps were troublesome, check out our <a href="http://community.rundexter.com" target="_blank">community forums</a>. There are answers to many frequently asked questions there! If you&rsquo;re still having trouble, you can chat with members of the community in real time by clicking the &ldquo;Join us on Slack&rdquo; button in the footer of our website. </p>

<h2 id="phase-1-setup">Phase 1: Setup</h2>
<pre class="highlight shell"><code>dexter create <span class="s2">"</span><span class="sb">`</span>whoami<span class="sb">`</span><span class="s2">: RSS Filter"</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="sb">`</span>whoami<span class="sb">`</span>_rss_filter
</code></pre>

<p>At this point we have a module skeleton, our package name (<code class="prettyprint">package.json:name</code>) and module title (<code class="prettyprint">meta.json:title</code>) already set, git initialized and ready to push to Dexter, and the foundation for our tests ready to go.  Pretty good for a single command!</p>

<div></div>
<pre class="highlight shell"><code><span class="gp">$ </span>npm install --save lodash
<span class="gp">$ </span>npm install --save request
<span class="gp">$ </span>npm install --save feedparser
</code></pre>

<p>The main purpose of this module is to deal with RSS feeds, so we&rsquo;ll want to add a <a href="https://github.com/danmactough/node-feedparser">lovely package</a> that elegantly handles a variety of feed types.  Feedparser doesn&rsquo;t actually fetch the feed XML, however, so we&rsquo;ll also need a package to deal with <a href="https://github.com/request/request">remote requests</a>.</p>

<p>We&rsquo;ll also use <a href="https://lodash.com/">lodash</a> to make our code a bit more readable.</p>

<p>We can use <code class="prettyprint">npm install --save</code> to add our dependencies directly to our <code class="prettyprint">package.json</code>.</p>

<p>The last bit of preparation is to get rid of the sample code in <code class="prettyprint">index.js</code> that comes with the skeleton.  We&rsquo;ll replace it with something better soon!</p>

<div></div>

<h2 id="phase-2-remote-requests">Phase 2: Remote requests</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'lodash'</span><span class="p">),</span>
    <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//...run</span>
    <span class="na">fetchUrl</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">request</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'error'</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'response'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span>
                    <span class="s1">'Bad status code '</span> 
                        <span class="o">+</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">statusCode</span> 
                        <span class="o">+</span> <span class="s1">' for '</span> <span class="o">+</span> <span class="nx">url</span>
                <span class="p">));</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Before we can start processing feed data, we&rsquo;ve got to go get the feed itself.  To do that, we&rsquo;re going to throw together a quick implementation of the Request library.</p>

<p>The process is simple&hellip;if we see an error, we fire it straight back through our callback.  If we get a response, we make sure it&rsquo;s <code class="prettyprint">200 OK</code> (again erroring out if it&rsquo;s not), then pass the raw response along to our callback.</p>

<p>Note that nothing we&rsquo;ve done so far is Dexter-specific — this is just standard Node.js code so far.</p>

<h2 id="phase-3-feed-parsing">Phase 3: Feed parsing</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">),</span>
    <span class="nx">FeedParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'feedparser'</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//...run</span>
    <span class="c1">//...fetchUrl</span>
    <span class="na">fetchItems</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FeedParser</span><span class="p">()</span>
            <span class="p">,</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">parser</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'error'</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
        <span class="nx">parser</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">items</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">parser</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'readable'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">item</span><span class="p">;</span>
            <span class="k">while</span><span class="p">((</span><span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">read</span><span class="p">()))</span> <span class="p">{</span>
                <span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">parser</span><span class="p">);</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre>

<p>Now that we know how we&rsquo;re getting our http data, we need to push it through FeedParser.  FeedParser deals entirely in streams - you take any stream data (specifically any stream data that&rsquo;s supposed to contain an RSS file) and pass it into your FeedParser instance.  The actual processing of content happens in events it emits.</p>

<p>Our use of these events is pretty straightforward.  Did we see an error? Pass it up through the callback.  Have we streamed enough readable data to act on?  Stash the data we found in an <code class="prettyprint">items[]</code> array.  Are we at the end of the stream?  We&rsquo;re done, call back with the stuff we found.</p>

<p>Again, we&rsquo;ve done nothing special or Dexter-specific yet.  We&rsquo;ve added a few third-party libraries to a Node.js library and wrapped up their basic functionality with some callbacks.  Now, onto getting our module ready for use in Dexter.</p>

<h2 id="phase-4-wiring-it-up">Phase 4: Wiring it up</h2>
<pre class="highlight javascript"><code><span class="c1">//...requires</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'url'</span><span class="p">).</span><span class="nx">first</span><span class="p">()</span>
      <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'No url provided'</span><span class="p">);</span>  
    <span class="p">}</span>

    <span class="c1">//...fetchUrl</span>
    <span class="c1">//...fetchItems                             </span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre>

<p>Let&rsquo;s start with our inputs. For now we’re just going to focus on a single input: the feed URL. To keep things simple, we’ll just use the first one we’re given. We’ll take a look how to deal with loops later on.</p>

<p>So what are the possibilities for our input? All inputs are treated as collections of data, even if only a single value is passed in.  We use the first() function of our collection to shift off the first (and only) URL on the list.</p>

<div></div>
<pre class="highlight javascript"><code><span class="c1">//...requires</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">//...inputs</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">fetchUrl</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//Let the parser grab the data</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">fetchItems</span><span class="p">(</span><span class="nx">stream</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">[];</span>
           <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
               <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
           <span class="p">}</span>
           <span class="c1">//Extract dexter-friendly data from the items</span>
           <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">response</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                   <span class="na">url</span><span class="p">:</span> <span class="nx">item</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
                   <span class="na">title</span><span class="p">:</span> <span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
                   <span class="na">summary</span><span class="p">:</span> <span class="nx">item</span><span class="p">.</span><span class="nx">summary</span><span class="p">,</span>
                   <span class="na">author</span><span class="p">:</span> <span class="nx">item</span><span class="p">.</span><span class="nx">author</span>
               <span class="p">});</span>
           <span class="p">});</span>
           <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">complete</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
        <span class="p">});</span>
     <span class="p">});</span>
  <span class="p">},</span>
  <span class="c1">//...fetchUrl</span>
  <span class="c1">//...fetchItems</span>
<span class="p">};</span>
</code></pre>

<p>Last, we will wire up our remote request and feed parsing functions to our Module tools. We’ll start with fetchUrl. We&rsquo;re set up to fail in the event of an error when connecting to the page. Again, we&rsquo;re in a position where we have to decide if it&rsquo;s worth it for us to throw an error. In this case, it probably is, since we&rsquo;ve been given bad data, which could indicate that the app is wired up incorrectly. If we managed to extract a stream, we’ll pass it along to <code class="prettyprint">fetchItems</code>.</p>

<p>We&rsquo;ll follow the same rules for the result of fetchItem - if we hit an error when processing the page, we&rsquo;ll fail.  Otherwise, all that&rsquo;s left to do is to extract the basic properties we want our module to return and
send them along to <code class="prettyprint">complete()</code>.  Mission accomplished!</p>

<h2 id="phase-5-testing">Phase 5: Testing</h2>

<blockquote>
<p>fixtures/default.js</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">//...</span>
<span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">local_test_step</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">input</span><span class="p">:</span> <span class="p">{</span>
            <span class="nl">url</span><span class="p">:</span> <span class="s1">'http://feeds.arstechnica.com/arstechnica/index/'</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//...</span>
</code></pre>

<p>Let&rsquo;s get ready to test.  For this module, our requirements are pretty simple - we just need to add some sample data to the step&rsquo;s inputs.  Our default test step is called <code class="prettyprint">local_test_step</code>, the input we&rsquo;re targeting is <code class="prettyprint">url</code>. We’re using the <a href="https://arstechnica.com">Ars Technica</a> feed in this example.</p>

<aside class="success">
What you&rsquo;re looking at here in the fixture is the raw serialization data that drives a Dexter App.  When you&rsquo;re using the `step` and `dexter` objects inside your module, you&rsquo;re actually interacting with some friendly wrappers around this raw information.  While you should never work with this data directly in your modules, as the wrappers will hide any changes we might make to the underlying data structure, it can be useful to see what it looks like here.
</aside>

<div></div>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter run
...
</code></pre>

<p>If everything worked, you should see a list of the most recent stories on Ars Technica in your console!</p>

<h2 id="phase-6-preparing-for-deployment">Phase 6: Preparing for deployment</h2>

<blockquote>
<p>meta.json</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Feed URL"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">  
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Article URL"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"title"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Article title"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"summary"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Article summary"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"author"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Author"</span><span class="w">        
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The only special requirement a Dexter module has outside of run/complete/fail is the explicit input and output definitions in <code class="prettyprint">meta.json</code>.  We need to identify each input we&rsquo;re expecting and define each output property we&rsquo;ll return.  This metadata is used to allow the Dexter App Editor to wire up our module with other modules based on the user&rsquo;s requirements.</p>

<p>Our inputs and outputs are pretty straightforward.  We&rsquo;re just accepting a single input - an URL string - and outputting 4 different strings that we extract from the feed (URL / Title / Summary / Author).</p>

<h2 id="phase-7-push-version-0-0-1">Phase 7: Push version 0.0.1!</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>git commit -am <span class="s1">'First working version'</span>
<span class="gp">$ </span>dexter push
</code></pre>

<p>That&rsquo;s it, you&rsquo;ve got a working RSS parser module!  Execute <code class="prettyprint">dexter push</code>, and, once the process completes, you should be able to open the App Editor and see your module.  Congrats, you&rsquo;re now a Dexter developer!</p>

<h2 id="phase-8-your-first-update-—-add-an-optional-filter">Phase 8: Your First Update — Add an optional filter</h2>
<pre class="highlight javascript"><code><span class="c1">//..includes</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'url'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
            <span class="nx">filters</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'filter'</span><span class="p">),</span>
            <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="c1">//...</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">response</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">filterItems</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">filters</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">complete</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
        <span class="c1">//...</span>
    <span class="p">},</span>
    <span class="c1">//..fetchUrl</span>
    <span class="c1">//..fetchItems</span>
    <span class="na">filterItems</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">terms</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">[],</span>
            <span class="nx">lcTerms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">;</span>
        <span class="c1">//We don't care about case sensitivity</span>
        <span class="nx">terms</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lcTerms</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">term</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">());</span>
        <span class="p">});</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//Check against ANY of the item's properties.</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">forIn</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="c1">//See if any of our terms hit</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">lcTerms</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">lcTerm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">response</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
                        <span class="nx">match</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                <span class="c1">//Don't continue if we managed to match on a property</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">});</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Updating a Dexter module is easy. For example, let’s add a feature to our module that lets you optionally apply a text filter to the feed items and only return those that match.</p>

<p>The code is pretty straighforward.  We&rsquo;ll add a new input - filter - and get them all.  Then we&rsquo;ll add a new function that looks for the filters in a list of our response objects and only returns the ones that match.  Finally, if we even <em>have</em> a filter, we&rsquo;ll apply our filter function to our discovered items and only return matches.</p>

<p>Note that we&rsquo;re taking advantage of the Dexter collection object that carries our filter values.  It&rsquo;s got a built-in lodash _.each function that lets you easily iterate through its contents.  You also could call filters.toArray() to work with a native array if you&rsquo;d prefer.</p>

<div></div>

<blockquote>
<p>fixture/default.js</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">//...</span>
<span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">local_test_step</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">input</span><span class="p">:</span> <span class="p">{</span>
            <span class="nl">url</span><span class="p">:</span> <span class="s1">'http://feeds.arstechnica.com/arstechnica/index/'</span><span class="p">,</span>
            <span class="nx">filter</span><span class="err">:</span> <span class="p">[</span><span class="s1">'apple'</span><span class="p">,</span> <span class="s1">'samsung'</span><span class="p">,</span> <span class="s1">'htc'</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Then we update our fixture with a filter variable, providing an array of data to make sure our list functionality works.  Go ahead and <code class="prettyprint">dexter run</code> to make sure it works!  You might get empty data this time if no items have the word &ldquo;apple&rdquo; in it.</p>

<div></div>

<blockquote>
<p>meta.json</p>
</blockquote>
<pre class="highlight javascript"><code><span class="p">{</span>
    <span class="s2">"inputs"</span><span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"filter"</span><span class="p">,</span>
            <span class="s2">"title"</span><span class="p">:</span><span class="s2">"Text filter"</span><span class="p">,</span>
            <span class="s2">"type"</span><span class="p">:</span><span class="s2">"string"</span>
        <span class="p">}</span>
        <span class="c1">//...</span>
<span class="p">}</span>
</code></pre>

<p>We&rsquo;ll also want to add our new input to the meta.json so it shows up in the App Editor.</p>

<div></div>

<blockquote>
<p>package.json</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="err">//...</span><span class="w">
    </span><span class="err">version:</span><span class="w"> </span><span class="err">'0.1.0',</span><span class="w">
    </span><span class="err">//...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Finally, we&rsquo;ll bump the version by a minor step since we added functionality.</p>

<p>That&rsquo;s it!  Just <code class="prettyprint">git commit -am &#39;Added a filter&#39;</code>, <code class="prettyprint">dexter push</code>, and we now have a filterable RSS feed parser!</p>

          <h1 id="module-api">Module API</h1>

<p>Modules in Dexter are the building blocks you&rsquo;ll use to assemble your Apps. They&rsquo;re expressions of the principal of doing one thing and doing it well: each is designed to have a single, clear task that works independently of the rest of your code. It&rsquo;s the job of the App to decide how these behaviors interact - the modules themselves only care about what kind of input they get and emitting consistent output.</p>

<aside class="success">
Modules are just specialized Node.js libraries with a bit of special sauce in the form of extra metadata, baked-in tests, and an SDK to help speed development.
</aside>

<h2 id="anatomy-of-a-module">Anatomy of a module</h2>

<p>Only 3 files are mandatory for a Dexter module:</p>

<blockquote>
<p>The Entrypoint (index.js)</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>

<ul>
<li><strong>index.js</strong>: This is the main touchpoint for your application. At a minimum, it needs to export a single function <code class="prettyprint">run(step, dexter)</code> and call <code class="prettyprint">this.complete()</code>. We&rsquo;ll go into more detail about this later on.</li>
</ul>

<div></div>

<blockquote>
<p>The Node.js Module Descriptor (package.json)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_dexter_module"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A minimal example Dexter module"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li><strong>package.json</strong>: This is a regular <a href="https://docs.npmjs.com/files/package.json">Node.js package definition</a>. This lets you use a Dexter module just like you would any other Node.js package.</li>
</ul>

<div></div>

<blockquote>
<p>The Dexter Descriptor (meta.json)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Dexter Module"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"heart"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Page URL"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"term"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Search term"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"links"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Found links"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"providers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li><strong>meta.json</strong>: Special definitions used by Dexter are stored here.

<ul>
<li><strong>title (string, required)</strong>: The user-friendly title of your module</li>
<li><strong>icon (string, optional)</strong>: A <a href="http://fortawesome.github.io/Font-Awesome/cheatsheet/">FontAwesome icon</a> that will show up alongside your module in the App editor.</li>
<li><strong>inputs (array, optional)</strong>: Definitions for any inputs your module accepts. Each item in the array should have 2 or 3 properties:

<ul>
<li><em>id (string)</em>: The input&rsquo;s code-friendly key (ex: first_name)</li>
<li><em>title (string)</em>: The input&rsquo;s user-friendly name (ex: First Name)</li>
<li><em>selector_type (string, optional)</em>: The default configuration setting for the input: either <strong>literal</strong> (a plain-text string should be used), <strong>map</strong> (it should be wired up to the output of another module), or <strong>user</strong> (it should be entered by the user of the app).  The default is <strong>map</strong>.</li>
</ul></li>
<li><strong>outputs (array, optional)</strong>: Definitions for any outputs your module generates.

<ul>
<li><em>id (string)</em>: The input&rsquo;s code-friendly key (ex: first_name)</li>
<li><em>title (string)</em>: The input&rsquo;s user-friendly name (ex: First Name)</li>
</ul></li>
<li><strong>providers (array, optional)</strong>: A list of Dexter OAuth providers that your module relies on

<ul>
<li><em>name (string)</em>: The lower-case name of the <a href="#providers">provider</a> that you&rsquo;re using</li>
</ul></li>
</ul></li>
</ul>

<h2 id="the-runtime-wrapper">The runtime wrapper</h2>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//See if we left off from a previous run</span>
        <span class="kd">var</span> <span class="nx">lastFoo</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'lastFoo'</span><span class="p">,</span> <span class="kc">null</span><span class="p">),</span>
            <span class="nx">thisFoo</span> <span class="o">=</span> <span class="nx">lastFoo</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">foos</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Looked for cached foo: :lastFoo, starting at :thisFoo'</span><span class="p">,</span>
            <span class="p">{</span> <span class="na">lastFoo</span><span class="p">:</span> <span class="nx">lastFoo</span><span class="p">,</span> <span class="na">thisFoo</span><span class="p">:</span> <span class="nx">thisFoo</span> <span class="p">});</span>
        <span class="c1">//Have we gone too far?</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">thisFoo</span> <span class="o">&gt;</span> <span class="nx">foos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Not enough foo!'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//Do our thing</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">runFoo</span><span class="p">(</span><span class="nx">foos</span><span class="p">[</span><span class="nx">thisFoo</span><span class="p">]);</span>
        <span class="nx">thisFoo</span> <span class="o">++</span><span class="p">;</span>
        <span class="c1">//Are we done yet?</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">thisFoo</span> <span class="o">===</span> <span class="nx">foos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//If not, let's go again!</span>
        <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="s1">'lastFoo'</span><span class="p">,</span> <span class="nx">thisFoo</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">replay</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Before dexter modules are run, they&rsquo;re wrapped up by a <a href="#basemodule">BaseModule</a> class that provides the tools you need to integrate your code into Dexter Apps.</p>

<p>That means if you write a class that exports something like:</p>

<p><code class="prettyprint">{ getData: fn, run: fn }</code></p>

<p>Once it gets inside the Dexter App, it ends up looking like:</p>

<p><code class="prettyprint">{ getData: fn, run: fn, log: fn, complete: fn, fail: fn, log: fn }</code></p>

<p>This wrapping process lets you focus on the details of your module — and even run your module outside of Dexter — without worrying about managing Dexter’s dependencies.</p>

<aside class="warning">
If your module exports properties named complete, fail, log, or run, your module will not work!
</aside>

<h2 id="inputs">Inputs</h2>

<p>As mentioned above, the meta.json file defines a collection of inputs expected by a module. To retrieve an input, you can use the <code class="prettyprint">step.input(&lt;input_id&gt;)</code> from the run method. Calling step.input returns data wrapped up by a DexterCollection. For inputs that are expected to have a single value, we provide a convenience method <code class="prettyprint">DexterCollection.first()</code> that will return the first item in the collection. Conversely, <code class="prettyprint">DexterCollection.each(callback)</code> allows easy iteration over the collection. DexterCollections can also be inspected via standard array accessors.</p>

<h2 id="outputs">Outputs</h2>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">({</span>
        <span class="na">message</span><span class="p">:</span> <span class="s2">"This is the first"</span> 
     <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>As mentioned above, the meta.json file defines a collection of outputs your module plans to expose. Your module should provide its outputs to Dexter by calling <code class="prettyprint">this.complete(&lt;object|array&gt;)</code> from the scope of the run method. </p>

<div></div>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
 <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">([{</span>
        <span class="na">message</span><span class="p">:</span> <span class="s2">"This is the first message"</span>
    <span class="p">},{</span>
        <span class="na">message</span><span class="p">:</span> <span class="s2">"This is the second message"</span>
    <span class="p">}]);</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>If appropriate, returning a collection of objects is also acceptable, downstream modules are expected to handle arrays of data just like your modules!</p>

<div></div>

<p>You can read more about outputs under <a href="#basemodule-complete-data">BaseModule::complete</a>.</p>

<h2 id="data-collections">Data collections</h2>

<p>Calls to <code class="prettyprint">step.input</code> and <code class="prettyprint">step.output</code> return data wrapped up by a DexterCollection, which makes managing an uncertain amount of data easier.</p>

<table><thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first()</td>
<td>Gets the first item in the collection, or null if the collection is empty</td>
</tr>
<tr>
<td>toArray()</td>
<td>Exports the entire collection as a native Array, which will be empty if there&rsquo;s no underlying data</td>
</tr>
<tr>
<td>each(callback)</td>
<td>Executes callback against each item in the collection using <a href="https://lodash.com/docs#forEach">lodash&rsquo;s forEach</a></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>length</td>
<td>How many items are in the collection</td>
</tr>
<tr>
<td>[0&hellip;length-1]</td>
<td>Access the collection like an array, returns <code class="prettyprint">undefined</code> if the index doesn&rsquo;t exist.</td>
</tr>
</tbody></table>

<h2 id="module-functions">Module functions</h2>

<p>When you create a module, it implicitly extends a Dexter BaseModel before it&rsquo;s run. The BaseModel provides several functions that are required for your Module to run in a Dexter App.</p>

<h3 id="basemodule-run-step-dexter">BaseModule.run(step, dexter)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#step">step</a></td>
<td>DexterStep</td>
<td>Contextual information for the module (inputs, etc.)</td>
</tr>
<tr>
<td><a href="#dexter">dexter</a></td>
<td>DexterApp</td>
<td>Global context for the whole App (runtime variables, configuration, etc.)</td>
</tr>
</tbody></table>

<p>This is the main entry point to your module. By the time this has been run, Dexter has assembled your inputs based on the App developer&rsquo;s configuration and made them available to you via <code class="prettyprint">[step](#step)</code>. If you need broader contextual information, you can all the data that&rsquo;s been generated for and by the app using <code class="prettyprint">[dexter](#dexter)</code>.</p>

<aside class="warning">
Dexter calls this function automatically when it&rsquo;s your module&rsquo;s turn to run in the App.  It should *not* be called again - you&rsquo;ll create a difficult-to-debug recursion.
</aside>

<h3 id="basemodule-complete-data">BaseModule.complete(data)</h3>

<blockquote>
<p>No output</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Single output</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">({</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="s1">'Bar'</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Multiple outputs</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">([</span>
    <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="s1">'Bar'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Baz'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="kc">null</span> <span class="p">}</span>
<span class="p">]);</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array,object</td>
<td>An object containing your outputs, or an array of objects containing your outputs if necessary</td>
</tr>
</tbody></table>

<p>When your module has successfully finished its job, it needs to call <code class="prettyprint">complete()</code> to let Dexter know it&rsquo;s safe to continue the current App.</p>

<p>If you have any useful information you want to make available to other modules, you&rsquo;ll want to return it here. Dexter assumes that you&rsquo;re returning an object or array, and that the object only has properties that match those you&rsquo;ve defined in your <code class="prettyprint">[meta.json:output](#anatomy-of-a-module)</code>. If you return a collection, each object&rsquo;s properties are correctly configured, Dexter will still know how get and share the data with other modules.</p>

<aside class="warning">
Note that you should only call `complete` once, and after you do, the process will exit. Calling `return this.complete()` as shown in the code samples is one way to guarantee that you only make one call and don&rsquo;t cause a race condition afterwards, though you can use careful code flow to do the same.
</aside>

<aside class="success">
<p>Your response object properties can be any serializiable value.</p>
<p>Keep in mind, however, that a lot of Dexter&rsquo;s power comes from the ability of unrelated modules to be able to communicate with one another. If you output a property that&rsquo;s an object, array, or other complex type, other modules will need to know how to handle that *specific* type in order to work with your module. Returning only basic values like strings or numbers allows your module to be m uch more flexible and useful in the Dexter ecosystem.</p>
</aside>

<h3 id="basemodule-fail-details">BaseModule.fail(details)</h3>

<blockquote>
<p>Simple error</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Something bad  happened'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Detailed error</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Something bad happened'</span><span class="p">,</span> <span class="na">badthing</span><span class="p">:</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'bar'</span> <span class="p">}});</span>
</code></pre>

<blockquote>
<p>Error forwarding</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">try</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>string,Error,object</td>
<td>Details about what went wrong</td>
</tr>
</tbody></table>

<p>When something goes badly wrong, <code class="prettyprint">fail()</code> lets Dexter know to abort the app.</p>

<p>Every call to <code class="prettyprint">fail()</code> automatically gets logged, and if you pass an error as the first argument, any available call stack will be logged as well.</p>

<aside class="warning">
Note that you should only call `fail()` once, and after you do, the process will exit. Calling `return this.fail()` as shown in the code samples is one way to guarantee that you only make one call and don&rsquo;t cause a race condition afterwards, though you can use careful code flow to do the same.
</aside>

<h3 id="basemodule-log-details">BaseModule.log(details)</h3>

<blockquote>
<p>Simple log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Querying Foo...'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Detailed log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Back from foo'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">results</span><span class="p">()</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Formatted log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Found foo :foo and bar :bar'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">results</span><span class="p">(),</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">42</span> <span class="p">});</span>
<span class="c1">//Shows up in the console as:</span>
<span class="c1">// 'Found foo **Object(...)** and bar 42'</span>
<span class="c1">//where the foo object is an interactive console object and 42 is a colored number</span>
</code></pre>

<p>The Dexter logger gives you a lot of flexibility. Every time you write a log, Dexter saves all the explicit data you provide alongside a snapshot of the App at that particular point in time. You can then recall and play back your logs for a particular run of an App and watch the App&rsquo;s context progress as the logs come in.</p>

<p>In its most basic form, you can pass a simple <code class="prettyprint">msg</code> string into the logger. Note that this is the exact same as calling <code class="prettyprint">log({ message: msg })</code>.</p>

<p>If you&rsquo;ve got some specific information you want to keep track of, you can pass it along as well. Our log playback tools will give some special treatment to any <code class="prettyprint">message</code> property you send along (it&rsquo;ll show it in front of the rest of the logged data in the Dexter console), but it&rsquo;s optional if you don&rsquo;t want it.  Remember that a serialized copy of the App is included for free with each log message — there&rsquo;s no need to duplicate its information in your log data.</p>

<p>The <code class="prettyprint">message</code> property gets additional special treatment by allowing you to format your log message in a way that takes advantage of the modern browser console. You can actually embed specific data in your log message by referencing its key after a colon, allowing you to easily see that data in the browser console. This is useful if you want to be able to monitor specific logged variables at a glance in the console.</p>

<h3 id="basemodule-replay">BaseModule.replay()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">lastIndexKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_lastIndex'</span><span class="p">,</span>
    <span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">lastIndexKey</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'data'</span><span class="p">),</span>
    <span class="nx">loopTo</span> <span class="o">=</span> <span class="nx">lastIndex</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nx">loopTo</span> <span class="o">&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">loopTo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">lastIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">loopTo</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">loopTo</span> <span class="o">===</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="s1">'lastIndex'</span><span class="p">,</span> <span class="nx">loopTo</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">replay</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<p>One of the downsides of working with APIs is that many of them are rate limited. This poses a problem if you&rsquo;re trying to handle an arbitrary amount of data in the 60s time window allotted to a Dexter module.  If you&rsquo;re in a situation where you&rsquo;re not sure if you can handle all the data you&rsquo;ve been given, <code class="prettyprint">replay()</code> can help you out.</p>

<p>Calling replay will rerun the current module with the exact same inputs it was originally given. By using the App&rsquo;s global state management tools, your module can keep running until it finishes what it set out to do.</p>

<aside class="warning">
There is currently a 50-step limit built into Dexter. That&rsquo;s more than enough for most Apps, *unless* you&rsquo;re relying heavily on replay to accomplish your goals. Please <a href="mailto:support@rundexter.com">contact us</a> if you would like to increase your limit.
</aside>

<h2 id="app-data">App data</h2>

<h3 id="dexter">dexter</h3>

<p>This is the 2nd parameter passed into your module&rsquo;s <code class="prettyprint">run()</code> function, and represents a high-level view into all that&rsquo;s gone on in your app so far.</p>

<p>It&rsquo;s also the accessor you use to map inputs and add switch cases when wiring up your App - more on that in the App UI section!</p>

<h3 id="dexter-instance-key-default">dexter.instance(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">'http://mylogger.example.com/?msg=Hello&amp;from='</span>
    <span class="o">+</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="s1">'instance_id'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">);</span>
</code></pre>

<p>Fetch some runtime information about this <em>instance</em> of an App. </p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instance_id</td>
<td>string</td>
<td>A unique id for this particular run of the App. Useful if you want track data on a per-run basis.</td>
</tr>
<tr>
<td>active_step</td>
<td>string</td>
<td>The ID of the step that&rsquo;s currently running. Inside your module, this is the same as step.config(&lsquo;id&rsquo;)</td>
</tr>
</tbody></table>

<h3 id="dexter-environment-key-default">dexter.environment(key, default)</h3>
<pre class="highlight javascript"><code><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">environment</span><span class="p">(</span><span class="s1">'slack_token'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'A slack_token environment variable is required for this module'</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">slack</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Slack</span><span class="p">(</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">environment</span><span class="p">(</span><span class="s1">'slack_token'</span><span class="p">));</span>
</code></pre>

<p>Fetch any private App variables that have been registered.</p>

<h3 id="dexter-user-key-default">dexter.user(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">user</span><span class="p">(</span><span class="s1">'email'</span><span class="p">));</span>
</code></pre>

<p>Basic information about the user who&rsquo;s running the App</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>profile.id</td>
<td>int</td>
<td>The Dexter system ID for the user</td>
</tr>
<tr>
<td>profile.email</td>
<td>string</td>
<td>The user&rsquo;s email</td>
</tr>
<tr>
<td>profile.image</td>
<td>string</td>
<td>A fully qualified URL pointing to the user&rsquo;s profile image</td>
</tr>
<tr>
<td>profile.api_key</td>
<td>string</td>
<td>The API key used by the user to access Dexter services (SMS, SMTP, etc.)</td>
</tr>
</tbody></table>

<h3 id="dexter-app-key-default">dexter.app(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="s1">'Module start'</span><span class="p">,</span> <span class="na">app</span><span class="p">:</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">app</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span> <span class="p">});</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>

<p>Details about the App itself. Details about the <em>instance</em> of the App being run come from <code class="prettyprint">instance()</code>.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Dexter system ID for the workflow</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>User-friendly title</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Longer description about what the App does</td>
</tr>
</tbody></table>

<h3 id="dexter-global-key-default">dexter.global(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_cache'</span><span class="p">,</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculate</span><span class="p">();</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="nx">cache</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">cache</span> <span class="p">});</span>
</code></pre>

<p>Fetch globally stored information assigned during the use of this app.</p>

<h3 id="dexter-globals">dexter.globals()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">globalKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">globals</span><span class="p">()),</span>
    <span class="nx">myKey</span> <span class="o">=</span> <span class="s1">'aKeyIWantToUse'</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nx">globalKeys</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">myKey</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Global key '</span> <span class="o">+</span> <span class="nx">myKey</span> <span class="o">+</span> <span class="s1">' already in use!'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>Get the entire collection of in-use global data in a single object.</p>

<h3 id="dexter-setglobal-key-value">dexter.setGlobal(key, value)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_cache'</span><span class="p">,</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculate</span><span class="p">();</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="nx">cache</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">cache</span> <span class="p">});</span>
</code></pre>

<p>An App-wide data store for the entire instance of the app. This is the ONLY place you can store information explicitly between steps and modules. Any serializable data can be assigned to a global. </p>

<h3 id="dexter-provider-name">dexter.provider(name)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'github'</span><span class="p">).</span><span class="nx">credentials</span><span class="p">(),</span>
    <span class="nx">GitHubApi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'github'</span><span class="p">),</span>
    <span class="nx">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GitHubApi</span><span class="p">({</span> <span class="na">version</span><span class="p">:</span> <span class="s1">'3.0.0'</span> <span class="p">});</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'oauth'</span><span class="p">,</span>
    <span class="na">token</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">token</span>
<span class="p">});</span>
<span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Authenticated'</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'github'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'username'</span><span class="p">);</span>
</code></pre>

<p>If your module has identified a need for providers in <a href="#anatomy-of-a-module">meta.json</a>, Dexter will give you the basic information you need to integrate with that provider on behalf of the App&rsquo;s user.  Take a look at the <a href="#providers">provider settings</a> for details.</p>

<h2 id="step">Step</h2>

<p>This is the first parameter passed to your module&rsquo;s <code class="prettyprint">run()</code> function, and probably the most important. It contains both the configuration of your module for the current App as well as the data that&rsquo;s been assigned to it.</p>

<h3 id="step-config-key-default">step.config(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">stepId</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
    <span class="nx">instanceId</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
    <span class="nx">storageKey</span> <span class="o">=</span> <span class="nx">instanceId</span> <span class="o">+</span> <span class="s1">'.'</span> <span class="o">+</span> <span class="nx">stepId</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">record</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="s1">'Module start'</span><span class="p">,</span> <span class="na">src</span><span class="p">:</span> <span class="nx">storageKey</span> <span class="p">});</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>

<p>Fetch configuration information about this module at its current spot in the workflow.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>A unique ID for the step (related to but not guaranteed to be the same as the module name)</td>
</tr>
<tr>
<td>next</td>
<td>object</td>
<td>A collection of information about the possible next steps after this one</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>A human-friendly name for the step</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>What kind of step it is - currently either &#39;trigger&rsquo; or &#39;module&rsquo;</td>
</tr>
<tr>
<td>type_name</td>
<td>string</td>
<td>The specific step type, based on type. For modules, this is the module name.</td>
</tr>
</tbody></table>

<h3 id="step-prev">step.prev()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">prev</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">prev</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">===</span> <span class="s1">'foo'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Cannot run foo before bar. That would be inconceivable.'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>Get the step that ran before this one.</p>

<h3 id="step-trigger">step.trigger()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">trigger</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">trigger</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'type_name'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'timer'</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastRan</span><span class="p">()</span> <span class="o">&gt;</span> <span class="nx">moment</span><span class="p">().</span><span class="nx">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'hours'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'my_cache'</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">liveData</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<p>Get the trigger step upstream from this step.</p>

<h3 id="step-module-key-default">step.module(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'package.name'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'meta.title'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">'Run from '</span> <span class="o">+</span> <span class="nx">title</span> <span class="o">+</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">record</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="nx">text</span> <span class="p">});</span>
</code></pre>

<p>Gets information about the module associated with the step.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>git_url</td>
<td>string</td>
<td>A fully-qualified URL to the primary git repository for this module</td>
</tr>
<tr>
<td>is_global</td>
<td>integer</td>
<td>&ldquo;1&rdquo; if this is a Dexter module, &ldquo;0&rdquo; if this is a user module</td>
</tr>
<tr>
<td>meta.*</td>
<td>misc</td>
<td>Access to any of the data in the module&rsquo;s meta.json file</td>
</tr>
<tr>
<td>package.*</td>
<td>misc</td>
<td>Access to any of the data in the module&rsquo;s package.json file</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Shortcut for &ldquo;package.name&rdquo;</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Shortcut for &ldquo;package.title&rdquo;</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Either &ldquo;global&rdquo; for Dexter modules or &ldquo;user&rdquo; for user modules.</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>Date when the module was first made</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>Date when the module was last updated in Dexter</td>
</tr>
<tr>
<td>user_id</td>
<td>int</td>
<td>User ID of the module&rsquo;s maintainer</td>
</tr>
</tbody></table>

<h3 id="step-input-key-default">step.input(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="s1">'default@example.com'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
    <span class="nx">messages</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'message'</span><span class="p">),</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">messages</span><span class="p">.</span><span class="nx">toArray</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s1">'&lt;br&gt;'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">queueEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s1">'You have messages'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
</code></pre>

<p>Fetch an input bound to this step in the App editor.</p>

<p>Unlike most other functions, this returns a <a href="#data-collections">Dexter collection</a> object instead of a raw value. This wrapper helps you navigate multiple or missing inputs as you prepare to run your module. You can read more about inputs <a href="#inputs">here</a></p>

<h3 id="step-inputs">step.inputs()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">inputs</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">inputs</span><span class="p">(),</span>
    <span class="nx">inputKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">inputs</span><span class="p">),</span>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">inputKeys</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">types</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">inputs</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">types</span><span class="p">);</span>
<span class="c1">//inputs: { x: 1, y: [2,3], z: null }</span>
<span class="c1">//log: { x: integer, y: array, z: null }</span>
</code></pre>

<p>Get the raw input object. This will be a single object with all the input properties defined in your <code class="prettyprint">meta.json:inputs</code> section and the raw values as parsed by Dexter.</p>

<h3 id="step-outputs">step.outputs()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">outputs</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">outputs</span><span class="p">(),</span>
    <span class="nx">outputKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">outputs</span><span class="p">),</span>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">outputKeys</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">types</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">outputs</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">types</span><span class="p">);</span>
<span class="c1">//outputs: { x: 1, y: [2,3], z: null }</span>
<span class="c1">//log: { x: integer, y: array, z: null }</span>
</code></pre>

<p>Get the raw output object. This will be a single object with all the output properties emitted by the module, which should match the outputs defined in that module&rsquo;s <code class="prettyprint">meta.json:outputs</code> section.</p>

<h2 id="providers">Providers</h2>

<p>Dexter currently supports the following API service providers:</p>

<ul>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Asana.md">asana</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/BitBucket.md">bitbucket</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Bitly.md">bitly</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Evernote.md">evernote</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Facebook.md">facebook</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Flickr.md">flickr</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/GitHub.md">github</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Google.md">google</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Instagram.md">instagram</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/LinkedIn.md">linkedin</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Mailchimp.md">mailchimp</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/RunKeeper.md">runkeeper</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Slack.md">slack</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Spotify.md">spotify</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Trello.md">trello</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Tumblr.md">tumblr</a></li>
<li><a href="https://github.com/rundexter/documentation/blob/master/source/providers/Twitter.md">twitter</a></li>
</ul>

<p>When you ask for provider information via <a href="#dexter-provider-name">dexter.provider(name)</a>, you&rsquo;re given a Provider object with the following methods:</p>

<h3 id="provider-token">provider.token()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'myapi'</span><span class="p">).</span><span class="nx">token</span><span class="p">(),</span>
    <span class="nx">lib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'myapi'</span><span class="p">),</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">lib</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">'/some/endpoink'</span><span class="p">,</span> <span class="p">{</span> <span class="na">token</span><span class="p">:</span> <span class="nx">token</span><span class="p">.</span><span class="nx">access_token</span><span class="p">,</span> <span class="na">client</span><span class="p">:</span> <span class="nx">token</span><span class="p">.</span><span class="nx">client_id</span> <span class="p">});</span>
</code></pre>

<p>Get the access token for the App&rsquo;s user.</p>

<aside class="warning">
If you&rsquo;re testing using the built-in Dexter key/secret (i.e. you&rsquo;re not using your own), you <strong>will not</strong> be given the client/customer secret.
</aside>

<p>For OAuth2 providers you&rsquo;ll get:</p>

<p><block class="highlight javascript">
  <code>
  {<br>
    access_token: &quot;...&quot;,<br>
    client_id: &quot;...&quot;<br>
    <em>client_secret: &quot;...&quot;</em> //Not included with global apps!<br>
  }
  </code>
</block></p>

<p>OAuth1 providers get:</p>

<p><block class="highlight javascript">
 <code>
 {<br>
    access_token: &quot;...&quot;,<br>
    access_token_secret: &quot;...&quot;,<br>
    consumer_key: &quot;...&quot;,<br>
    <em>consumer_secret: &quot;...&quot;</em> //Not included with global apps!<br>
 }
 </code>
</block></p>

<h3 id="provider-data-key-default">provider.data(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s1">'github'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'username'</span><span class="p">);</span>
</code></pre>

<p>Get pre-cached data from the user&rsquo;s provider information.  See the individual provider documentation for details.</p>

          <h1 id="faq-amp-other-helpful-info">FAQ &amp; Other Helpful Info</h1>

<p>This section is very much a work in progress. We&rsquo;ll be adding to it as key questions become brought to our attention. If you have questions regarding anything that is not listed here, please visit our <a href="http://community.rundexter.com" target="_blank">community forums</a>, or connect with us on <a href="http://rundexter.slack.com" target="_blank">Slack</a>.</p>

<h2 id="how-do-i-debug-my-app-when-it’s-live">How do I debug my app when it’s live?</h2>

<p>Modules send messages to the Dexter logging component and those messages will appear in your browser’s developer console when your app is executing. In chrome, you should open up developer tools to view the messages; in firefox, you can use firebug or the native tools.</p>

<h2 id="what-do-the-configuration-icons-mean">What do the configuration icons mean?</h2>

<p>You’ll notice some iconography and radio buttons just below the input titles on the right sidebar of your configuration panel. Each one is a different input method: </p>

<ul>
<li><strong>User Defined</strong> - If this is selected, a user will define the input when they go to use the app. This happens during their configuration<br></li>
<li><strong>Mapping</strong> - If this is selected, the input will be whatever output you grab, drag, and drop from the output options, to the step below.</li>
<li><strong>Literal</strong> - If this is selected, the input will be whatever you type into the provided field that will appear below the dropdown. NOTE: If you lead your input with a &ldquo;=&rdquo; the field can take raw javascript.</li>
</ul>

<p>Each of these is useful depending on how your app is being used. In the SMS example we walked through to begin your Dexter experience, we set the Phone Number input to be user defined. If we went with literal instead, the number that would be used would be the one you typed in, meaning all links from the bookmarklet would be texted to that number.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
