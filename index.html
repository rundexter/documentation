<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Welcome to Dexter</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>


    <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic' rel='stylesheet' type='text/css'>

    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="shortcut icon" href="/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
    <meta name="msapplication-config" content="/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
		<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			 viewBox="-89.5 344.1 200.3 39.5" style="enable-background:new -89.5 344.1 200.3 39.5; padding: 25px 15px 10px 15px; width: 60%; text-align: center" xml:space="preserve">
		<style type="text/css">
			.st0{fill:#ffffff;}
		</style>
		<g>
			<path class="st0" d="M-75.9,354.5V345c0-0.5-0.4-0.9-0.9-0.9h-11.8c-0.5,0-0.9,0.4-0.9,0.9v9.5c0,0.5,0.4,0.9,0.9,0.9h11.8
				C-76.3,355.4-75.9,355-75.9,354.5z"/>
			<path class="st0" d="M-68,347.8h-4.3c-0.5,0-0.9,0.4-0.9,0.9l0,7.8c0,0.5,0.4,0.9,0.9,0.9h3.4c4.3,0,7.5,3.1,7.5,9
				c0,5.9-5.7,7.7-7.8,7.7H-73c-0.5,0-0.9-0.4-0.9-0.9V359c0-0.5-0.4-0.9-0.9-0.9l-8.5,0c-0.5,0-0.9,0.4-0.9,0.9v23.7
				c0,0.5,0.4,0.9,0.9,0.9h15.9c3.2,0,16.8-1.9,16.8-18.4C-50.6,348.6-66.5,347.8-68,347.8z"/>
			<path class="st0" d="M44.4,347.9h-24c-0.3,0-0.7,0.2-0.8,0.5l-4.7,7.7c-0.2,0.3-0.1,0.7,0.2,0.9c0.1,0.1,0.3,0.1,0.5,0.1h8.1
				c0.5,0,1,0.4,1,1v24.5c0,0.5,0.4,1,1,1h8.6c0.5,0,1-0.4,1-1v-24.5c0-0.5,0.4-1,1-1h8.2c0.5,0,1-0.4,1-1v-7.3
				C45.4,348.4,45,347.9,44.4,347.9z"/>
			<path class="st0" d="M-20.7,347.8h-26.8c-0.5,0-0.9,0.4-0.9,0.9v33.9c0,0.5,0.4,0.9,0.9,0.9h26.8c0.5,0,0.9-0.4,0.9-0.9v-7.2
				c0-0.5-0.4-0.9-0.9-0.9h-16.6c-0.5,0-0.9-0.4-0.9-0.9v-2.5c0-0.5,0.4-0.9,0.9-0.9h9.3c0.5,0,0.9-0.4,0.9-0.9v-7.6
				c0-0.5-0.4-0.9-0.9-0.9h-9.3c-0.5,0-0.9-0.4-0.9-0.9v-2.6c0-0.5,0.4-0.9,0.9-0.9h16.6c0.5,0,0.9-0.4,0.9-0.9v-6.9
				C-19.8,348.2-20.2,347.8-20.7,347.8z"/>
			<path class="st0" d="M76.1,347.8H49.4c-0.5,0-0.9,0.4-0.9,0.9v33.9c0,0.5,0.4,0.9,0.9,0.9h26.8c0.5,0,0.9-0.4,0.9-0.9v-7.2
				c0-0.5-0.4-0.9-0.9-0.9H59.6c-0.5,0-0.9-0.4-0.9-0.9v-2.5c0-0.5,0.4-0.9,0.9-0.9h9.3c0.5,0,0.9-0.4,0.9-0.9v-7.6
				c0-0.5-0.4-0.9-0.9-0.9h-9.3c-0.5,0-0.9-0.4-0.9-0.9v-2.6c0-0.5,0.4-0.9,0.9-0.9h16.6c0.5,0,0.9-0.4,0.9-0.9v-6.9
				C77,348.2,76.6,347.8,76.1,347.8z"/>
			<path class="st0" d="M110.7,382.2l-6.6-11.1c-0.3-0.5-0.1-1,0.4-1.2c1.8-0.9,5.8-3.6,5.8-9.7c0-10.3-10.4-12.2-12.5-12.2H81
				c-0.5,0-0.9,0.4-0.9,0.9v33.8c0,0.5,0.4,0.9,0.9,0.9h8.5c0.5,0,0.9-0.4,0.9-0.9v-10c0-0.5,0.4-0.9,0.9-0.9h1.9
				c0.3,0,0.6,0.2,0.8,0.5l5.7,10.8c0.1,0.3,0.5,0.5,0.8,0.5h9.4C110.6,383.5,111,382.8,110.7,382.2z M95.8,363.1h-4.6
				c-0.5,0-0.9-0.4-0.9-0.9v-4.4c0-0.5,0.4-0.9,0.9-0.9h4.3c3.2,0,4.2,1,4.2,3.4C99.7,362.5,97.3,363.1,95.8,363.1z"/>
			<path class="st0" d="M6.4,366.1c-0.2-0.3-0.2-0.6,0-0.9l9.5-16c0.3-0.6-0.1-1.4-0.8-1.4H5.4c-0.3,0-0.6,0.2-0.8,0.5l-3.9,7.3
				c-0.3,0.6-1.2,0.6-1.6,0l-3.7-7.3c-0.1-0.3-0.5-0.5-0.8-0.5h-10c-0.7,0-1.1,0.7-0.8,1.3l9.1,15.9c0.2,0.3,0.1,0.6,0,0.9l-9.6,16.2
				c-0.3,0.6,0.1,1.4,0.8,1.4h9.9c0.3,0,0.6-0.2,0.8-0.5l3.9-7.7c0.3-0.6,1.2-0.7,1.6,0l4.4,7.8c0.2,0.3,0.5,0.5,0.8,0.5h9.9
				c0.7,0,1.1-0.8,0.8-1.4L6.4,366.1z"/>
		</g>
		</svg>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="getting-started">Getting Started</h1>

<p>Dexter is a platform that makes it easy for developers to connect third-party APIs and build apps that automate your digital life. Everyday we use a handful of tools that do one thing and do it well, whether thatâ€™s ordering lunch or messaging the office a meme. However, more complex tasks require a combination of different solutions. Dexter is here to simplify connecting these services. With Dexter, you can connect the web the way you want.</p>

<h2 id="hello-world">Hello World</h2>

<p>To get started you need a Dexter account. Dexter is currently in private beta so you&rsquo;ll need an invite code. If you don&rsquo;t have one you can request one at <a href="https://rundexter.com/#section-6">rundexter.com</a>. Once you have an account, sign up and take the walkthrough to build your first app. </p>

<h2 id="detailed-walkthrough">Detailed Walkthrough</h2>

<p>The walkthrough gives you the basic instructions as you click through, but here&rsquo;s some more info in case you get stuck, confused, or just want to know more: </p>

<ol>
<li><p><strong>Create a New App</strong> - Dexter is both for builders and consumers. We start with the building. Click the new app button on the top right of your screen. </p></li>
<li><p><strong>Name Your App</strong> - The tutorial autopopulates the title and description field with the details of the app we&rsquo;re going to build: a <a href="http://www.google.com/search?q=define:bookmarklet" target="_blank">bookmarklet</a> that sends the url of the website on your desktop screen to your mobile phone via text message so that you can take it with you on the road!</p></li>
<li><p><strong>Place Your First Trigger</strong> - A trigger step is simply a way for the outside world to communicate with a Dexter app and kickoff some data processing. In this tutorial the trigger is the bookmarklet since it&rsquo;s going to let us know when you want your text message. The way we notify the workflow about a trigger is to drag it onto the light gray bar at the top of the canvas. That&rsquo;s our trigger bar! </p></li>
<li><p><strong>Place Your First Module</strong> - A module does the heavy lifting. It takes the data from the previous step(s) &ndash; in this case the bookmarklet &ndash; and acts on it. For our first app we want to send ourselves a text message. How is that done? Well by dragging the Dexter SMS module onto the canvas and dragging the orange outlet on the bookmarklet to the input of the Dexter SMS step. </p></li>
<li><p><strong>Connect The Data</strong> - The last step is telling Dexter how the data moves in between steps. To do this, we click the configure button and bring up the configure panel. Does this panel remind you of the back of your VCR? Good, that&rsquo;s what we meant to do. Each module has outputs and inputs. In this case the bookmarklet module outputs the URL of the page you&rsquo;re on. The Dexter SMS module accepts a phone number and a message. In order to tell the Dexter app that we want to send the URL from the bookmarklet step to the dexter sms step, we connect them. And that&rsquo;s it you&rsquo;re done! There are a few details we&rsquo;re leaving out and for the uber curious, here they are: </p>

<ol>
<li>You&rsquo;ll notice that the phone number input on the Dexter SMS module is filled in. That&rsquo;s because it&rsquo;s in <em>user</em> mode, denoted by the radio buttons on the right panel. That means that the user will have to enter it when they subscribe to your app. If you always wanted to receive the message yourself, regardless of who clicked the button, you could put the input into text mode by clicking on the <code class="prettyprint">A</code> radio button. Then you can type in your phone number. User mode will get a little clearer when we get to the use page. The little hand denotes &lsquo;map&rsquo; mode which is how we mapped the URL to the Message field. </li>
<li>The left panel shows all the data you can grab. In this simplistic example we only have the data from the bookmarklet available, but as you add more steps to your apps you&rsquo;ll get to toggle where the source data is coming from. </li>
</ol></li>
<li><p><strong>Use Your App</strong> - Click the Use App button on the main nav and you&rsquo;ll get taken to your share page. This page is publically accessible and anyone can use your app, but you&rsquo;re the only one with the rights to edit it. Let&rsquo;s test it out. Click the Use This App button. Remember how we put the Phone Number into &ldquo;user&rdquo; mode, well, as a result, the wizard prompts us for our phone number. Go ahead and enter your phone number and hit finish. Once that&rsquo;s done, you&rsquo;ll see some new usage instructions for your app. Remember that bookmarklet that you dragged onto the canvas? Well, Dexter knows to generate a unique bookmarklet for every user and give them instructions to drag it onto their bookmarklet bar. Once you&rsquo;ve dragged the button to your bookmarklet bar, give it a click - you should get a text message with a link to the page that you&rsquo;re on! </p></li>
</ol>

<p>Congratulations on building your first app! You&rsquo;ve just scratched the surface, want more? Read On! </p>

<h1 id="what-is-a-dexter-app">What Is A Dexter App?</h1>

<p>An app is simply a collection of JavaScript modules arranged in a meaningful way on the editor canvas. When we drag a module onto the canvas, we say that we are instantiating that module or forming a step in the application. </p>

<h2 id="steps">Steps</h2>

<p>Steps are arranged by connecting one step to the next in the sequential order that data should be processed. In Dexter terms, we call This sequence a stream, which we cover in greater detail in the next section. </p>

<p>There is one special step, called a <strong>trigger step</strong>. A trigger step is simply a way for the outside world to communicate with a Dexter app and kickoff some data processing. In its simplest form it is a URL that any external app can access via a <code class="prettyprint">POST</code> request with arbitrary data that initiates the request. Dexter has some common triggers built-in (and we will add more regularly). Still, for any custom needs, you can always use the webhook trigger to pass in any type of data that you like. </p>

<h2 id="streams">Streams</h2>

<p>A stream begins with a trigger step and is followed by one or more process steps. A stream does not have any formal termination point, but an execution of any given stream will complete when there are no more steps left. An app can have multiple streams.</p>

<h2 id="module-types">Module Types</h2>

<p>There are three types of modules in Dexter:</p>

<ol>
    <li>

<strong>Core modules</strong>

<br/>

Core modules are special. There are some cases where the simplistic behavior of modules presents a challenge to building a fully featured app. So we have carved out a space to deliver some magical methods to you. These will continue to expand, but here is what is available now: 

<br/>
<br/>

Queue - Sometimes while building a Dexter app you want to collect information that you&rsquo;re not ready to act on yet. Let&rsquo;s say you want to store a bunch of URLs from the bookmarklet trigger, but you don&rsquo;t want to do anything with them until a timer trigger is activated later. The queue step lets you stash that data for later use via the fetch step. The queue step takes a single parameter, &ldquo;class_name&rdquo;, which is the name that you&rsquo;ll reference in your fetch step.  

<br/>
<br/>

Fetch - The fetch module is queues partner, it takes one parameter, &ldquo;class_name&rdquo;, which tells Dexter which queued up data you want to retrieve. After a fetch step is executed all downstream steps will have access to the steps upstream of a queue with matching names. 

<br />
<br />

Switch - Sometimes in the course of assembling a stream you want to execute a different step depending on the evaluation of a condition. The switch step enables this by allowing you to specify up to 5 different conditions and branching a stream at a given point. 

    </li>

    <li>

<strong>Dexter modules</strong>

<br/>

These are the Dexter-blessed, built-in tools of the Dexter app ecosystem. They&rsquo;re available to every power user and developer in Dexter, and cover a broad range of behaviors.
    </li>

    <li>

<strong>User modules</strong>

<br/>

User modules are modules you&rsquo;ve made for your own apps. You build them with the same tools we&rsquo;ve used to build the vast library of Dexter modules, and you can use them the same in the App editor. The only difference between User modules and Dexter modules lies in distribution: only *you* can use your user modules.

    </li>

</ol>

<h1 id="sdk-overview">SDK Overview</h1>

<p>Dexter is a completely open system. The Dexter SMS module you dragged onto the canvas in the tutorial is open source and you can view it in our <a href="http://github.com/rundexter/dexter-sms" target="_blank">Github repository</a>. Anyone can contribute new modules via our client tools. We are working hard to expand our library with more and more third party integrations to minimize the amount of code every app developer needs to write. </p>

<p>Want to help? Dexter apps are composed of an interconnected series of modules, each of which has a specific job to do. Together with the Dexter community, our goal is to build modules that cover the range of tasks that you might do with a third party provider &ndash; like send a Slack message, add a song to a Spotify playlist, archive an item in Gmail, and more! </p>

<h2 id="how-it-works">How it works</h2>

<p>The Dexter SDK lets you create your own module, which is just a slightly enhanced Node.js library. You declare what kind of serializable input and output your module receives and sends, respectively.</p>

<p>When you&rsquo;re done, you push your code  into Dexter, using a custom git server. You can use either the sdk <code class="prettyprint">dexter push</code> or a regular git program <code class="prettyprint">git push dexter master</code> to send the code along.</p>

<p>Once it&rsquo;s in our system, it&rsquo;ll show up in the App editor as another module for you to use. You&rsquo;ll be able to wire it up however you want and run it alongside the built-in modules.</p>

<p>You can make and use as many custom modules as you like - the sky&rsquo;s the limit!</p>

<h2 id="setting-up-your-environment">Setting Up Your Environment</h2>
<pre class="highlight shell"><code><span class="c"># install the Dexter client</span>
<span class="gp">$ </span>npm install rundexter -g
</code></pre>

<p>To get started you need to have a working installation of <a href="https://nodejs.org" target="_blank">Node.js</a>. Dexter has been tested with <code class="prettyprint">Node.js v0.12.5</code>, but it will likely work with other versions as well. </p>

<h2 id="log-in">Log in</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>dexter login <span class="o">{</span> your email <span class="o">}</span>
<span class="c"># Enter your password when prompted</span>
</code></pre>

<p>Before you do anything, you&rsquo;ll need to log in with your rundexter.com credentials. That lets us know who you are, so we can make the next steps happen.</p>

<h2 id="make-a-key">Make a key</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>ssh-keygen -f ~/.ssh/id_rsa -N <span class="s2">""</span>
</code></pre>

<p>Youâ€™ll need to have an SSH key of some flavor (RSA or DSA). You might already have one - theyâ€™re useful things, and youâ€™ve probably needed one before. Theyâ€™re probably in ~/.ssh/ and called id_rsa and id_rsa.pub. If you donâ€™t have one, make one now. You can run the given sample code to create a key, and <a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys">read more on the subject</a> if you&rsquo;re interested.</p>

<h2 id="send-your-key">Send your key</h2>
<pre class="highlight shell"><code><span class="c"># You can pass a path to a specific key here if you'd like</span>
<span class="gp">$ </span>dexter add_key
<span class="c"># Make sure we got it!</span>
<span class="gp">$ </span>dexter list keys
</code></pre>

<p>In order to be able to push your code to us, youâ€™ll have to register your SSH key with us. Weâ€™ll use the default key if you have one, or you can give us a specific key youâ€™d like you use. You can also register more than one key (on this machine or multiple machines) if youâ€™d like.</p>

<h1 id="sdk-reference">SDK Reference</h1>

<h2 id="authentication">Authentication</h2>

<h3 id="dexter-login">dexter login</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter login code@rundexter.com
Password: <span class="k">****</span>
Add your public key <span class="k">for </span>GIT access? <span class="o">(</span>yes<span class="o">)</span> no
If you change your mind, you can always add it later
dexter add_key &lt;keyname&gt;<span class="o">(</span>optional<span class="o">)</span> Add an SSH key to the system

</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_required</td>
<td>true</td>
<td>Your email</td>
</tr>
</tbody></table>

<p>Log into your rundexter.com account using the website&rsquo;s email and password.</p>

<p>Dexter remembers your credentials by adding a record to ~/.netrc, a fairly standard credential storage file used by FTP, Heroku, and a variety of other tools. Even though it&rsquo;s a plain-text file, don&rsquo;t worry!  We don&rsquo;t put your password in there, just an API key that only means something to the Dexter tools.</p>

<aside class="notice">
This will always prompt for a password, which MUST be entered interactively.
</aside>

<h3 id="dexter-add_key">dexter add_key</h3>

<blockquote>
<p>Example: Default key</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter add_key
Your key is now available on dexter!
</code></pre>

<blockquote>
<p>Example: Custom key</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter add_key ~/dexter.rsa.pub
Your key is now available on dexter!
Make sure your .ssh/config is <span class="nb">set </span>to use this key <span class="k">for </span>rundexter.com
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>path</td>
<td>false</td>
<td>Path to the key file</td>
</tr>
</tbody></table>

<p>Add a public key file to the system. This file will be used to authenticate your access to the Dexter deployment servers when you publish code.</p>

<p>If left out, Dexter will first look for a file in ~/.ssh/id_rsa.pub, then in ~/.ssh/id_dsa.pub</p>

<p>Adding keys is useful if you want to have multiple people work on a single module, or if you work from multiple computers with varying security requirements (a work and a personal computer, for instance).</p>

<h3 id="dexter-remove_key">dexter remove_key</h3>

<blockquote>
<p>Example: Single match</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter remove_key 3792y+
Matching keys removed: 1
</code></pre>

<blockquote>
<p>Example: Multiple matches (error)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter remove_key AAA
Request failed: More than one key was found that matches this query - please be more specific
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pattern</td>
<td>true</td>
<td>A string pattern found in the key you want to delete</td>
</tr>
</tbody></table>

<p>Remove a key from rundexter.com that you no longer want to have access to the Dexter deployment servers. The provided pattern can exist anywhere in the key, or it can be the entire key. Use the list_keys command if you need to figure out a good pattern to use, or pass in your machine name if you think it&rsquo;s unique.</p>

<p>We&rsquo;ll look for the pattern you provide in all of your registered keys, but we&rsquo;ll only delete a key if it&rsquo;s the only match we find. In case the pattern you give us matches more than one key, we&rsquo;ll ask you to be more specific instead of wiping them all out!</p>

<p>Removing a key doesn&rsquo;t prevent you from re-adding that key in the future.</p>

<h3 id="dexter-list_keys">dexter list_keys</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter list_keys
ssh-rsa AAA.........82Fregr<span class="o">=</span> dexter@rundexter.com

ssh-dsa AAA.........38eeer2<span class="o">=</span> dexter@rundexter.com
</code></pre>

<p>Show all the keys you&rsquo;ve registered with rundexter.com</p>

<h2 id="module-operations">Module Operations</h2>

<h3 id="dexter-check_name">dexter check_name</h3>

<blockquote>
<p>Example (available)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter check_name foobar
Package name is available
</code></pre>

<blockquote>
<p>Example (unavailable)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter check_name dexter-sms
Someone <span class="k">else </span>owns this package already
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>The module name you&rsquo;re checking</td>
</tr>
</tbody></table>

<p>Check to see if a given module name is taken. Dexter modules live in a global namespace, so if someone else has used a name, you can&rsquo;t also use it.</p>

<h3 id="dexter-init">dexter init</h3>

<blockquote>
<p>Example (this folder)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter init
Initializing Dexter remote <span class="k">in</span> /home/dexter/projects/my-dexter-module
Your dexter remote is ready
<span class="gp">~/rundexter$ </span>git remote -v
dexter  git@git.rundexter.com:/my-dexter-module <span class="o">(</span>fetch<span class="o">)</span>
dexter  git@git.rundexter.com:/my-dexter-module <span class="o">(</span>push<span class="o">)</span>
</code></pre>

<blockquote>
<p>Example (another folder)</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter init /srv/app/dexter/module
Initializing Dexter remote <span class="k">in</span> /srv/app/dexter/module
Your dexter remote is ready
<span class="gp">~/rundexter$ </span>git remote -v
dexter  git@git.rundexter.com:/server-dexter-module <span class="o">(</span>fetch<span class="o">)</span>
dexter  git@git.rundexter.com:/server-dexter-module <span class="o">(</span>push<span class="o">)</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>path</td>
<td>false</td>
<td>The path to the git instance</td>
</tr>
</tbody></table>

<p>Set up an existing git repository for use with the dexter command-line tool. So long as the target directory <em>looks</em> like a dexter module (i.e. it has valid package and meta json files), init will create a remote named &ldquo;dexter&rdquo; for you.</p>

<h3 id="dexter-create">dexter create</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter create foobar
Initializing project as Dexter DocGuy <span class="o">(</span>code@rundexter.com<span class="o">)</span>
Created repo <span class="k">in</span> /home/dexter/foobar
lodash@3.10.1 node_modules/lodash
Added .gitignore
Added README.md
Added fixtures/default.js
Added fixtures/env.example.js
Added form/README.md
Added form/checkout.form
Added form/run.form
Added form/settings.form
Added index.js
Added meta.json
Added package.json
Created initial commit <span class="o">[</span>Oid 5e0536cebca0811079d4f3ec87f940839854cca4]
Initializing Dexter remote <span class="k">in</span> /home/dexter/foobar
Your dexter remote is ready
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>The name of the new Dexter module</td>
</tr>
</tbody></table>

<p>Create a skeleton for a new Dexter module. The following things happen:</p>

<ol>
<li>The given name is first checked to make sure it&rsquo;s available</li>
<li>A module skeleton is copied and modified to match the given name</li>
<li>A local git repository is created for the module and its skeleton contents added as a first commit</li>
<li>The dexter remote is configured</li>
</ol>

<h3 id="dexter-run">dexter run</h3>

<blockquote>
<p>Example (default)</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># runs fixtures/default.js</span>
<span class="gp">~/rundexter$ </span>dexter run
<span class="o">{</span>
    <span class="s2">"foo"</span>: <span class="s2">"bar"</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Example (custom)</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># runs fixtures/barWithBaz.js</span>
<span class="gp">~/rundexter$ </span>dexter barWithBaz
<span class="o">{</span>
    <span class="s2">"bar"</span>: <span class="s2">"baz"</span>
<span class="o">}</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>The name of the fixture to run</td>
</tr>
</tbody></table>

<p>Execute the function using a built-in fixture. Every Dexter module is created with a default fixture which is used if you don&rsquo;t explicitly identify which fixture to run.</p>

<h3 id="dexter-push">dexter push</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">~/rundexter$ </span>dexter push
Adding your module to Dexter...
Counting objects: 13, <span class="k">done</span>.
Delta compression using up to 4 threads.
Compressing objects: 100% <span class="o">(</span>11/11<span class="o">)</span>, <span class="k">done</span>.
Writing objects: 100% <span class="o">(</span>13/13<span class="o">)</span>, 3.21 KiB | 0 bytes/s, <span class="k">done</span>.
Total 13 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
<span class="gp">---&gt; </span>Processing push
<span class="gp">---&gt; </span>Sending to your environment
<span class="gp">---&gt; </span>Push processed!
<span class="gp">---&gt; </span>Success! Your module is now available <span class="k">in </span>the Dexter Editor!
To git@git.beta.rundexter.com:/foobar
 <span class="k">*</span> <span class="o">[</span>new branch]      master -&gt; master
</code></pre>

<p>Push your module to Dexter. This will update your code on our servers and deploy it for use by all Things and future Things in the system.</p>

<p>Note that deployment is largely tied to your module&rsquo;s version #. For example, let&rsquo;s say you do the following:</p>

<ol>
<li>Create a module foobar at version 0.1</li>
<li>Add foobar to a Thing called Hello World.</li>
<li>Update foobar by with a new &ldquo;baz&rdquo; function and bump the version to 0.2</li>
<li>Add foobar to a Thing called Welcome Universe.</li>
</ol>

<p>When this process is complete, &ldquo;Hello World&rdquo; will still be using foobar 0.1, and &ldquo;Welcome Universe&rdquo; will be using 0.2. You would have to explicitly update &ldquo;Hello World&rdquo; in order for it to start using foobar 0.2.</p>

<h1 id="module-api">Module API</h1>

<p>Modules in Dexter are the building blocks you&rsquo;ll use to assemble your Apps. They&rsquo;re expressions of the principal of doing one thing and doing it well: each is designed to have a single, clear task that works independently of the rest of your code. It&rsquo;s the job of the App to decide how these behaviors interact - the modules themselves only care about what kind of input they get and emitting consistent output.</p>

<aside class="success">
Modules are just specialized Node.js libraries with a bit of special sauce in the form of extra metadata, baked-in tests, and an SDK to help speed development. Most can be used independently of Dexter, and can be incorporated into any other Node.js / [Browserified](http://browserify.org/) application.
</aside>

<h2 id="anatomy-of-a-module">Anatomy of a module</h2>

<p>Only 3 files are mandatory for a Dexter module:</p>

<blockquote>
<p>The Entrypoint</p>
</blockquote>
<pre class="highlight javascript"><code><span class="cm">/*
 * index.js
 */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>

<ul>
<li><strong>index.js</strong>: This is the main touchpoint for your application. At a minimum, it needs to export a single function &ldquo;run(step, dexter)&rdquo; and call &ldquo;this.succeed()&rdquo;. We&rsquo;ll go into more detail about this later on.</li>
</ul>

<div></div>

<blockquote>
<p>The Node.js Module Descriptor (package.json)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_dexter_module"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A minimal example Dexter module"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li><strong>package.json</strong>: This is a regular <a href="https://docs.npmjs.com/files/package.json">Node.js package definition</a>. This lets you use a Dexter module just like you would any other Node.js package - you can npm install &ndash;save to your hearts content, add your module to a public or private NPM server, and otherwise distribute it outside of Dexter.</li>
</ul>

<div></div>

<blockquote>
<p>The Dexter Descriptor (meta.json)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Dexter Module"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"heart"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Page URL"</span><span class="p">,</span><span class="w"> 
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> 
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"term"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Search term"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> 
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> 
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"links"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Found links"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> 
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li><strong>meta.json</strong>: Special definitions used by Dexter are stored here.

<ul>
<li><strong>title (string, required)</strong>: The user-friendly title of your module</li>
<li><strong>icon (string, optional)</strong>: A <a href="http://fortawesome.github.io/Font-Awesome/cheatsheet/">FontAwesome icon</a> that will show up alongside your module in the App editor.</li>
<li><strong>inputs (array, optional)</strong>: Definitions for any inputs your module accepts. Each item in the array should have 3 properties:

<ul>
<li><em>id (string)</em>: The input&rsquo;s code-friendly key (ex: first_name)</li>
<li><em>title (string)</em>: The input&rsquo;s user-friendly name (ex: First Name)</li>
<li><em>type (string)</em>: A basic type (string, integer, array)</li>
</ul></li>
<li><strong>outputs (array, optional)</strong>: Definitions for any outputs your module generates. Just like inputs, each object in the array has 3 properties:

<ul>
<li><em>id (string)</em>: The input&rsquo;s code-friendly key (ex: first_name)</li>
<li><em>title (string)</em>: The input&rsquo;s user-friendly name (ex: First Name)</li>
<li><em>type (string)</em>: A basic type (string, integer, array)</li>
</ul></li>
</ul></li>
</ul>

<h2 id="the-guts-of-a-dexter-module">The guts of a Dexter module</h2>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//See if we left off from a previous run</span>
        <span class="kd">var</span> <span class="nx">lastFoo</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'lastFoo'</span><span class="p">,</span> <span class="kc">null</span><span class="p">),</span>
            <span class="nx">thisFoo</span> <span class="o">=</span> <span class="nx">lastFoo</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">foos</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Looked for cached foo: :lastFoo, starting at :thisFoo'</span><span class="p">,</span>
            <span class="p">{</span> <span class="na">lastFoo</span><span class="p">:</span> <span class="nx">lastFoo</span><span class="p">,</span> <span class="na">thisFoo</span><span class="p">:</span> <span class="nx">thisFoo</span> <span class="p">});</span>
        <span class="c1">//Have we gone too far?</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">thisFoo</span> <span class="o">&gt;</span> <span class="nx">foos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Not enough foo!'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//Do our thing</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">runFoo</span><span class="p">(</span><span class="nx">foos</span><span class="p">[</span><span class="nx">thisFoo</span><span class="p">]);</span>
        <span class="nx">thisFoo</span> <span class="o">++</span><span class="p">;</span>
        <span class="c1">//Are we done yet?</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">thisFoo</span> <span class="o">===</span> <span class="nx">foos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//Let's go again!</span>
        <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="s1">'lastFoo'</span><span class="p">,</span> <span class="nx">thisFoo</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">replay</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Before dexter modules are run, they&rsquo;re wrapped up by a <a href="#basemodule">BaseModule</a> class that provides the tools you need to integrate your code into Dexter Apps.</p>

<p>That means if you write a class that exports something like:</p>

<p><code class="prettyprint">{ getData: fn, run: fn }</code></p>

<p>&hellip;once it gets inside the Dexter App, it ends up looking like:</p>

<p><code class="prettyprint">{ getData: fn, run: fn, log: fn, succeed: fn, fail: fn, log: fn }</code></p>

<p>This implicit wrapping process lets you focus on the details of your module, and even run your module outside of Dexter without worrying about managing Dexter&rsquo;s dependencies!</p>

<aside class="warning">
If your module exports properties named succeed, fail, log, or run, your module will not work!
</aside>

<h2 id="inputs">Inputs</h2>

<blockquote>
<p>Code</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">dump</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'--------'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">inputs</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">inputs</span><span class="p">(),</span>
            <span class="nx">singleExisting</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'singleExisting'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
            <span class="nx">singleMissing</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'singleMissing'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
            <span class="nx">singleMissingDefaulted</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'singleMissingDefaulted'</span><span class="p">,</span> <span class="s1">'singleDefault'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>

            <span class="nx">multipleExisting</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleExisting'</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span>
            <span class="nx">multipleMissing</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleMissing'</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span>
            <span class="nx">multipleMissingDefaulted</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleMissingDefaulted'</span><span class="p">,</span> <span class="s1">'multipleDefault'</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span>

            <span class="nx">multipleExistingZero</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleExisting'</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">multipleExistingFirst</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleExisting'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
            <span class="nx">multipleMissingZero</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleMissing'</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">multipleMissingFirst</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'multipleMissing'</span><span class="p">).</span><span class="nx">first</span><span class="p">();</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">inputs</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">singleExisting</span><span class="p">,</span> <span class="nx">singleMissing</span><span class="p">,</span> <span class="nx">singleMissingDefaulted</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">multipleExisting</span><span class="p">,</span> <span class="nx">multipleMissing</span><span class="p">,</span> <span class="nx">multipleMissingDefaulted</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">multipleExistingZero</span><span class="p">,</span> <span class="nx">multipleExistingFirst</span><span class="p">,</span> <span class="nx">multipleMissingZero</span><span class="p">,</span> <span class="nx">multipleMissingFirst</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>

<blockquote>
<p>Result</p>
</blockquote>
<pre class="highlight javascript"><code><span class="p">{</span> <span class="nl">singleExisting</span><span class="p">:</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="nx">multipleExisting</span><span class="err">:</span> <span class="p">[</span><span class="s1">'Bar'</span><span class="p">,</span> <span class="s1">'Baz'</span><span class="p">]</span> <span class="p">}</span>
<span class="s1">'-------'</span>
<span class="p">{</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'singleDefault'</span> <span class="p">}</span>
<span class="s1">'-------'</span>
<span class="p">{</span> <span class="p">[</span><span class="s1">'Bar'</span><span class="p">,</span> <span class="s1">'Baz'</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="s1">'multipleDefault'</span><span class="p">]</span> <span class="p">}</span>
<span class="s1">'-------'</span>
<span class="p">{</span> <span class="s1">'Bar'</span><span class="p">,</span> <span class="s1">'Bar'</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">null</span> <span class="p">}</span>
</code></pre>

<p>The real power of Dexter lies in its ability to mix and match outputs from a variety of sources in order to provide input data for a given module. Well designed modules therefore must be able to accommodate as broad a spectrum of inputs as possible.</p>

<p>All module inputs are, under the hood, wrapped up in a single object <code class="prettyprint">{}</code>. That object has properties for each input defined in the module&rsquo;s meta.json file <code class="prettyprint">{ input1: null, input2: null}</code>. As an app is configured, the user creating the app maps different data sources to each of those inputs <code class="prettyprint">input1 = output1, input2 = output2, {output 1: 1}, {output 2: 2}</code>. When the app is executed, those mappings are evaluated, and the results bound to the input object <code class="prettyprint">{input1: 1, input2: 2}</code>.</p>

<p>The real fun begins when input data is mapped from sources that have multiple outputs <code class="prettyprint">[{output1: 1}, {output1: 2}], {output2: 3}</code>. Our input system is flexible, so all the possible inputs get aggregated into our input object <code class="prettyprint">{ input1: [1,2], input2: [3] }</code>. It&rsquo;s also possible that some configured mappings will produce no data at all <code class="prettyprint">{ input2: 3 }</code>.</p>

<p>It&rsquo;s the job of you as the module creator to figure good rules for dealing with this variety of input data. Is a particular input critical enough to warrant killing an App if it&rsquo;s missing?  How do you deal with misaligned amounts of input?  Which inputs can you only deal with 1 of, and which are safe to handle as arrays?</p>

<p>Inputs can either be accessed directly by extracting them via <code class="prettyprint">step.inputs()</code>, or wrapping individual inputs in a Dexter <a href="#data-collections">data collection</a> by calling <code class="prettyprint">step.input(key)</code>. You can verify that you have the data you need through any combination of assertions (assertion errors will cause the app to abort), explicit failures (calling <code class="prettyprint">this.fail(...)</code> lets you give specific reasons for the error), or by providing defaults (calls to <code class="prettyprint">input(key, default)</code> with a good fallback default value).</p>

<h2 id="outputs">Outputs</h2>

<blockquote>
<p>Module 1: User fetcher</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="s1">'joe@example.com'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Joe'</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>

<blockquote>
<p>Module 2: Link fetcher</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">([</span>
            <span class="p">{</span> <span class="na">url</span><span class="p">:</span> <span class="s1">'http://rundexter.com'</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Dexter'</span> <span class="p">},</span>
            <span class="p">{</span> <span class="na">url</span><span class="p">:</span> <span class="s1">'http://reddit.com'</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Why my project is late'</span> <span class="p">}</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>

<blockquote>
<p>Module 3: Message</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">//Imports are:</span>
<span class="c1">// to = dexter.step('module_1').output('email');</span>
<span class="c1">// urls = dexter.step('module_2').output('url');</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'to'</span><span class="p">),</span>
            <span class="nx">urls</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(),</span> <span class="nx">urls</span><span class="p">.</span><span class="nx">toArray</span><span class="p">());</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="c1">//In the log:</span>
<span class="c1">// ['joe@example.com'] ['http://rundexter.com', 'http://reddit.com']</span>
</code></pre>

<p>In keeping with the theme of doing one thing and doing it well, Dexter assumes all modules will output a single kind of object that reflects its goals. Does the module get Slack history?  Then the output should look like <code class="prettyprint">{ user, text, link }</code>. Does it get a list of stock prices?  The output should look like <code class="prettyprint">{ symbol, name, price, change }</code>. You describe what that object looks like in your <code class="prettyprint">meta.json</code> file: each property of the object gets a record in its &ldquo;outputs&rdquo; collection.</p>

<p>That doesn&rsquo;t mean you&rsquo;re restricted to returning a single object. If your module didn&rsquo;t produce any output, just return nothing. If it produced multiple data points, return a collection of your output objects. So long as each object has properties that are recognizable from your <code class="prettyprint">meta.json:outputs</code> definitions, Dexter will be able to parse the outputs and pass them along as needed.</p>

<p>What you <em>don&rsquo;t</em> want to do is to define and return complex object properties. Dexter&rsquo;s power lies in the ability to map the output from one module to the input of another, and to let the user decide how to make those associations meaningful. In order for you output to be understood by the widest variety of other modules, each object property should be a basic type (string/numeric good, binary/object bad) and well named (email/url good, o_fsk_n50/aws_9009939923f_useast1 bad).</p>

<p>That doesn&rsquo;t mean you <em>can&rsquo;t</em> move around complex objects. If you&rsquo;re building a pool of apps that perform image manipulation, you should create a series of modules that base64 encode image binaries and moves them around for processing. If you&rsquo;re doing an AWS automation App, you should have IAM objects as a basic type that your modules understand. Just know that most other modules won&rsquo;t know what you&rsquo;re talking about!</p>

<p>You can read more about outputs under <a href="#basemodule-succeed-data">BaseModule::succeed</a>.</p>

<h2 id="data-collections">Data collections</h2>

<p>Calls to step.input(key, default) and step.output(key, default) return data wrapped up by a Dexter collection, which makes managing an uncertain amount of data easier.</p>

<table><thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first()</td>
<td>Gets the first item in the collection, or null if the collection is empty</td>
</tr>
<tr>
<td>toArray()</td>
<td>Exports the entire collection as a native Array, which will be empty if there&rsquo;s no underlying data</td>
</tr>
<tr>
<td>each(callback)</td>
<td>Executes callback against each item in the collection</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>length</td>
<td>How many items are in the collection</td>
</tr>
<tr>
<td>[0&hellip;length]</td>
<td>Access the collection like an array, returns <code class="prettyprint">undefined</code> if the index doesn&rsquo;t exist.</td>
</tr>
</tbody></table>

<h2 id="module-functions">Module functions</h2>

<p>When you create a module, it implicitly extends a Dexter BaseModel before it&rsquo;s run. The BaseModel provides several functions that are required for your Module to run in a Dexter App.</p>

<h3 id="basemodule-run-step-dexter">BaseModule.run(step, dexter)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>step</td>
<td>DexterStep</td>
<td>Information about how this module should be used</td>
</tr>
<tr>
<td>dexter</td>
<td>DexterApp</td>
<td>Global information about the state of the whole App being run</td>
</tr>
</tbody></table>

<p>This is the main entry point to your module. By the time this has been run, Dexter has assembled your inputs based on the user&rsquo;s requirements and made them available to you via <code class="prettyprint">step</code>. In case you need some broader context about how things are running, however, you can see the entire data definition for the currently running App via the dexter parameter.</p>

<aside class="warning">
You don&rsquo;t need to run this function yourself - Dexter automatically runs it when necessary!
</aside>

<h3 id="basemodule-succeed-data">BaseModule.succeed(data)</h3>

<blockquote>
<p>No output</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Single output</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="s1">'Bar'</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Multiple outputs</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">([</span>
    <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Foo'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="s1">'Bar'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'Baz'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="kc">null</span> <span class="p">}</span>
<span class="p">]);</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array,object</td>
<td>An object containing your outputs, or an array of objects containing your outputs if necessary</td>
</tr>
</tbody></table>

<p>When your module has successfully finished its job, it needs to call <code class="prettyprint">succeed()</code> to let Dexter know it&rsquo;s safe to continue the current App.</p>

<p>If you have any useful information you want to make available to other modules, you&rsquo;ll want to return it here. Dexter assumes that you&rsquo;re returning an object of some kind, and that the object only has properties that match those you&rsquo;ve defined in your <a href="#anatomy-of-a-module">meta.json&rsquo;s output section</a>. If you&rsquo;ve got multiple such objects, that&rsquo;s cool too - just return an array of objects that match your spec instead. Dexter will still know how get and share data from the list of objects with other modules.</p>

<p>Note that you should only call succeed once, and after you do, the wrapper running the function will quickly shut down, making any code your run afterwards a bit of a gamble. Calling <code class="prettyprint">return this.succeed()</code> as shown in the code samples is one way to guarantee that you only make one call and don&rsquo;t cause a race condition afterwards, though you can use careful code flow to do the same if you&rsquo;d prefer.</p>

<aside class="success">
<p>Your response object properties can technically be *anything* - strings, arrays, objects - pretty much any non-binary, non-stream, non-executable value is fair game!</p>
<p>Keep in mind, however, that a lot of Dexter&rsquo;s power comes from the ability of unrelated modules to be able to communicate with one another. If you return an object or an array as one of your response object properties, other modules will need to know how to deal with the *specific* object or array you&rsquo;re returning, limiting how useful your module will be. If you return basic values like strings or numbers, your module will be much more flexible and useful in the Dexter ecosystem.</p>
</aside>

<h3 id="basemodule-fail-details">BaseModule.fail(details)</h3>

<blockquote>
<p>Simple error</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Something bad  happened'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Detailed error</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Something bad happened'</span><span class="p">,</span> <span class="na">badthing</span><span class="p">:</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'bar'</span> <span class="p">}});</span>
</code></pre>

<blockquote>
<p>Error forwarding</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">try</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>string,Error,object</td>
<td>Details about what went wrong</td>
</tr>
</tbody></table>

<p>When something goes badly wrong, fail lets Dexter know to abort the app.</p>

<p>Every call to fail() automatically gets logged, and if you pass an error as the first argument, its stack will be captured if possible.</p>

<p>Note that you should only call succeed once, and after you do, the wrapper running the function will quickly shut down, making any code your run afterwards a bit of a gamble. Calling <code class="prettyprint">return this.fail()</code> as shown in the code samples is one way to guarantee that you only make one call and don&rsquo;t cause a race condition afterwards, though you can use careful code flow to do the same if you&rsquo;d prefer.</p>

<h3 id="basemodule-log-details">BaseModule.log(details)</h3>

<blockquote>
<p>Simple log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Querying Foo...'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Detailed log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Back from foo'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">results</span><span class="p">()</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Formatted log</p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'Found foo :foo and bar :bar'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">results</span><span class="p">(),</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">42</span> <span class="p">});</span>
<span class="c1">//Shows up in the console as:</span>
<span class="c1">// 'Found foo **Object(...)** and bar 42'</span>
<span class="c1">//where the foo object is an interactive console object and 42 is a colored number</span>
</code></pre>

<p>A logger is a programmer&rsquo;s best friend, and the Dexter logger gives you a  ton of power. Every time you write a log, Dexter saves all the data you provide alongside a snapshot of the App at that point in time. You can then recall and play back your logs for a particular run of an App as needed.</p>

<p>In its most basic form, you can pass a simple <code class="prettyprint">msg</code> string into the logger. Note that this is the exact same as calling <code class="prettyprint">log({ message: msg })</code>.</p>

<p>If you&rsquo;ve got some specific information you want to keep track of, you can pass it along as well. Our log playback tools will give some special treatment to any <code class="prettyprint">message</code> property you send along (it&rsquo;ll show it in front of the rest of the logged data in the Dexter console), but it&rsquo;s optional if you don&rsquo;t want it.</p>

<p>The <code class="prettyprint">message</code> property gets additional special treatment by allowing you to format your log message in a way that takes advantage of the modern browser console. You can actually embed specific data that you pass along by referencing its key after a colon, allowing you to easily see that data in the browser console. This is useful if you want to be able to monitor specific logged variables at a glance in the console.</p>

<h3 id="basemodule-replay">BaseModule.replay()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">lastIndexKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_lastIndex'</span><span class="p">,</span>
    <span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">lastIndexKey</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'data'</span><span class="p">),</span>
    <span class="nx">loopTo</span> <span class="o">=</span> <span class="nx">lastIndex</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nx">loopTo</span> <span class="o">&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">loopTo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">lastIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">loopTo</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">loopTo</span> <span class="o">===</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="s1">'lastIndex'</span><span class="p">,</span> <span class="nx">loopTo</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">replay</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<p>One of the downsides of working with APIs is that many of them have limits on how often you can use them. If you&rsquo;re using such a stingy API,  you need to be aware of how much data you can actually handle in a 60s long Dexter module.</p>

<p>Replay is the tool to use if this occurs. Calling replay will rerun the current module with the exact same inputs it was originally given. By using the App&rsquo;s global state management tools, your module can keep running until it finishes what it set out to do.</p>

<p>Some other scenarios where replay might be useful:
* Waiting for an API endpoint to become available
* Waiting for slowly updated data to change
* Waiting for scarce resources to free up</p>

<aside class="warning">
There is currently a 50-step limit built into Dexter. That&rsquo;s more than enough for most Apps, *unless* you&rsquo;re relying heavily on replay to accomplish your goals. If you think you&rsquo;ll need to replay enough times to worry about that limit, you might want to consider another strategy, like queue and fetch combined with timers.
</aside>

<h2 id="app-data">App data</h2>

<h3 id="dexter">dexter</h3>

<p>This is the 2nd parameter passed into your module&rsquo;s <code class="prettyprint">run()</code> function, and represents a high-level view into all that&rsquo;s gone on in your app so far.</p>

<p>It&rsquo;s also the accessor you use to map inputs and add switch cases when wiring up your App - more on that in the App UI section!</p>

<h3 id="dexter-clone">dexter.clone()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">d2</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">clone</span><span class="p">();</span>
<span class="nx">d2</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="s1">'test'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">notEqual</span><span class="p">(</span><span class="nx">d2</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'test'</span><span class="p">),</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span>
</code></pre>

<p>Make a deep copy of the entire Dexter structure. This is mainly useful if you need to pass the structure off to a subprocess and need to ensure that it doesn&rsquo;t make any changes.</p>

<h3 id="dexter-instance-key-default">dexter.instance(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">'http://mylogger.example.com/?msg=Hello&amp;from='</span>
    <span class="o">+</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="s1">'instance_id'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">);</span>
</code></pre>

<p>Fetch some runtime information about this <em>instance</em> of an App. </p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instance_id</td>
<td>string</td>
<td>A unique id for this particular run of the App. Useful if you want track data on a per-run basis.</td>
</tr>
<tr>
<td>active_step</td>
<td>string</td>
<td>The ID of the step that&rsquo;s currently running. For your modules, this is the same as step.config(&#39;id&rsquo;)</td>
</tr>
</tbody></table>

<h3 id="dexter-environment-key-default">dexter.environment(key, default)</h3>
<pre class="highlight javascript"><code><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">environment</span><span class="p">(</span><span class="s1">'slack_token'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'A slack_token environment variable is required for this module'</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">slack</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Slack</span><span class="p">(</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">environment</span><span class="p">(</span><span class="s1">'slack_token'</span><span class="p">));</span>
</code></pre>

<p>Fetch any private App variables that have been registered.</p>

<p>Right now we&rsquo;re in the process of giving you as a module developer a way to communicate to App developers which keys your module requires. For now, just test for the keys&rsquo; presence and return an informative message indicating the requirement.</p>

<h3 id="dexter-user-key-default">dexter.user(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">user</span><span class="p">(</span><span class="s1">'email'</span><span class="p">));</span>
</code></pre>

<p>Basic information about the user who&rsquo;s running the App</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>profile.id</td>
<td>int</td>
<td>The Dexter system ID for the user</td>
</tr>
<tr>
<td>profile.email</td>
<td>string</td>
<td>The user&rsquo;s email</td>
</tr>
<tr>
<td>profile.image</td>
<td>string</td>
<td>A fully qualified URL pointing to the user&rsquo;s profile image</td>
</tr>
<tr>
<td>profile.api_key</td>
<td>string</td>
<td>The API key used by the user to access Dexter services (SMS, SMTP, etc.)</td>
</tr>
</tbody></table>

<h3 id="dexter-workflow-key-default">dexter.workflow(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="s1">'Module start'</span><span class="p">,</span> <span class="na">workflow</span><span class="p">:</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">workflow</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span> <span class="p">});</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>

<p>Details about the App itself. Details about the <em>instance</em> of the App being run come from <code class="prettyprint">instance()</code>.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Dexter system ID for the workflow</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>User-friendly title</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Longer description about what the App does</td>
</tr>
</tbody></table>

<h3 id="dexter-url-key-default">dexter.url(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">dexterUrl</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
</code></pre>

<p>URLs used to access internal Dexter resources. These are better used through the actual helper functions and modules rather than directly by your modules.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>home</td>
<td>string</td>
<td>Dexter&rsquo;s homepage</td>
</tr>
<tr>
<td>logger</td>
<td>string</td>
<td>An endpoint used to track in-App logs</td>
</tr>
<tr>
<td>reporter</td>
<td>string</td>
<td>If this workflow is being run on a timer, the App calls back to the reporter to let it know it&rsquo;s done.</td>
</tr>
</tbody></table>

<h3 id="dexter-global-key-default">dexter.global(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_cache'</span><span class="p">,</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculate</span><span class="p">();</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="nx">cache</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">cache</span> <span class="p">});</span>
</code></pre>

<p>Fetch globally stored information assigned during the use of this app. We&rsquo;re not placing any restrictions on how you use this, so you should do so both carefully and sparingly.</p>

<p>Available keys and values are determined by individual modules and will vary from App to App.</p>

<h3 id="dexter-globals">dexter.globals()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">globalKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">dexter</span><span class="p">.</span><span class="nx">globals</span><span class="p">()),</span>
    <span class="nx">myKey</span> <span class="o">=</span> <span class="s1">'aKeyIWantToUse'</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nx">globalKeys</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">myKey</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Global key '</span> <span class="o">+</span> <span class="nx">myKey</span> <span class="o">+</span> <span class="s1">' already in use!'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>Get the entire collection of in-use global data in a single object.</p>

<h3 id="dexter-setglobal-key-value">dexter.setGlobal(key, value)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'_cache'</span><span class="p">,</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculate</span><span class="p">();</span>
    <span class="nx">dexter</span><span class="p">.</span><span class="nx">setGlobal</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="nx">cache</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">cache</span> <span class="p">});</span>
</code></pre>

<p>An App-wide data store for the entire instance of the app. This is the ONLY place you can store information explicitly between steps and modules. We&rsquo;re not placing any restrictions on how you use this, so you should do so both carefully and sparingly.</p>

<p>Any serializable data can be assigned to a global (string, numeric, object, array, etc.). Unless you have a good reason not to, it&rsquo;s a good practice to namespace your global variables for your particular module. </p>

<h3 id="dexter-step-id">dexter.step(id)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">linkedStep</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">step</span><span class="p">(</span><span class="s1">'linked-step'</span><span class="p">,</span> <span class="kc">null</span><span class="p">),</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="p">(</span><span class="nx">linkedStep</span><span class="p">)</span> <span class="p">?</span> <span class="nx">linkedStep</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'data'</span><span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">);</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">});</span>
</code></pre>

<p>Get a specific step from the workflow. There shouldn&rsquo;t be any real reason to use this, but if you do, it outputs either an AppStep (the same thing as the 1st parameter to <code class="prettyprint">run()</code> or null;</p>

<h2 id="step">Step</h2>

<p>This is the first parameter passed to your module&rsquo;s <code class="prettyprint">run()</code> function, and probably the most important. It contains both the configuration of your step for the current App as well as the data that&rsquo;s been assigned to it.</p>

<h3 id="step-clone">step.clone()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">stepClone</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">clone</span><span class="p">();</span>
</code></pre>

<p>Make a deep copy of the entire step. Possibly useful for handing off to other applications or libraries if you&rsquo;re concerned they might modify the data.</p>

<h3 id="step-config-key-default">step.config(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">stepId</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
    <span class="nx">instanceId</span> <span class="o">=</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
    <span class="nx">storageKey</span> <span class="o">=</span> <span class="nx">instanceId</span> <span class="o">+</span> <span class="s1">'.'</span> <span class="o">+</span> <span class="nx">stepId</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">record</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="s1">'Module start'</span><span class="p">,</span> <span class="na">src</span><span class="p">:</span> <span class="nx">storageKey</span> <span class="p">});</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>

<p>Fetch configuration information about this module at its current spot in the workflow.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>A unique ID for the step (related to but not guaranteed to be the same as the module name)</td>
</tr>
<tr>
<td>next</td>
<td>object</td>
<td>A collection of information about the possible next steps after this one</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>A human-friendly name for the step</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>What kind of step it is - currently either &#39;trigger&rsquo; or &#39;module&rsquo;</td>
</tr>
<tr>
<td>type_name</td>
<td>string</td>
<td>The specific step type, based on type. For modules, this is the module name.</td>
</tr>
</tbody></table>

<h3 id="step-prev">step.prev()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">prev</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">prev</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="o">===</span> <span class="s1">'foo'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="s1">'Cannot run foo before bar. That would be inconceivable.'</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">Get</span> <span class="nx">the</span> <span class="nx">step</span> <span class="nx">that</span> <span class="nx">ran</span> <span class="nx">before</span> <span class="k">this</span> <span class="nx">one</span><span class="p">.</span>

<span class="err">###</span> <span class="nx">step</span><span class="p">.</span><span class="nx">trigger</span><span class="p">()</span>
<span class="err">```</span><span class="nx">javascript</span>
<span class="kd">var</span> <span class="nx">trigger</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">trigger</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="s1">'type_name'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'timer'</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastRan</span><span class="p">()</span> <span class="o">&gt;</span> <span class="nx">moment</span><span class="p">().</span><span class="nx">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'hours'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dexter</span><span class="p">.</span><span class="nx">global</span><span class="p">(</span><span class="s1">'my_cache'</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">liveData</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<p>Get the trigger step upstream from this step.</p>

<h3 id="step-module-key-default">step.module(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'package.name'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'meta.title'</span><span class="p">,</span> <span class="s1">'(unknown)'</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">'Run from '</span> <span class="o">+</span> <span class="nx">title</span> <span class="o">+</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">')'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">record</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseLog</span><span class="p">({</span> <span class="na">msg</span><span class="p">:</span> <span class="nx">text</span> <span class="p">});</span>
</code></pre>

<p>Gets information about the module associated with the step.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>git_url</td>
<td>string</td>
<td>A fully-qualified URL to the primary git repository for this module</td>
</tr>
<tr>
<td>is_global</td>
<td>integer</td>
<td>&ldquo;1&rdquo; if this is a Dexter module, &ldquo;0&rdquo; if this is a user module</td>
</tr>
<tr>
<td>meta.*</td>
<td>misc</td>
<td>Access to any of the data in the module&rsquo;s meta.json file</td>
</tr>
<tr>
<td>package.*</td>
<td>misc</td>
<td>Access to any of the data in the module&rsquo;s package.json file</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Shortcut for &ldquo;package.name&rdquo;</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Shortcut for &ldquo;package.title&rdquo;</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Either &ldquo;global&rdquo; for Dexter modules or &ldquo;user&rdquo; for user modules.</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>Date when the module was first made</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>Date when the module was last updated in Dexter</td>
</tr>
<tr>
<td>user_id</td>
<td>int</td>
<td>User ID of the module&rsquo;s maintainer</td>
</tr>
</tbody></table>

<aside class="warning">
Note that for trigger steps, these values will always return the default, as triggers have no modules.
</aside>

<h3 id="step-input-key-default">step.input(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="s1">'default@example.com'</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
    <span class="nx">messages</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'message'</span><span class="p">),</span>
    <span class="nx">message</span> <span class="o">=</span> <span class="nx">messages</span><span class="p">.</span><span class="nx">toArray</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s1">'&lt;br&gt;'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">queueEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s1">'You have messages'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">succeed</span><span class="p">();</span>
</code></pre>

<p>Fetch an input bound to this step in the App editor.</p>

<p>Unlike most other functions, this returns a <a href="#data-collections">Dexter collection</a> object instead of a raw value. This wrapper helps you navigate multiple or missing inputs as you prepare to run your module. You can read more about inputs <a href="#inputs">here</a></p>

<h3 id="step-inputs">step.inputs()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">inputs</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">inputs</span><span class="p">(),</span>
    <span class="nx">inputKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">inputs</span><span class="p">),</span>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">inputKeys</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">types</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">inputs</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">types</span><span class="p">);</span>
<span class="c1">//inputs: { x: 1, y: [2,3], z: null }</span>
<span class="c1">//log: { x: integer, y: array, z: null }</span>
</code></pre>

<p>Get the raw input object. This will be a single object with all the input properties defined in your <code class="prettyprint">meta.json:inputs</code> section and the raw values as parsed by Dexter.</p>

<h3 id="step-output-key-default">step.output(key, default)</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">trigger</span><span class="p">().</span><span class="nx">output</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">output</span><span class="p">.</span><span class="nx">toArray</span><span class="p">())</span>
<span class="c1">//outputs: [{ url: 'http://google.com' }, { url: 'http://yahoo.com' }]</span>
<span class="c1">//log: 2 ['http://google.com', 'http://yahoo.com']</span>
</code></pre>

<p>Extract a single property&rsquo;s worth of output data from a step. This isn&rsquo;t often used inside of a module, but <em>is</em> often used inside a switch statement to compare information. Like inputs, this returns a <a href="#data-collections">Dexter collection</a></p>

<h3 id="step-outputs">step.outputs()</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">outputs</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">outputs</span><span class="p">(),</span>
    <span class="nx">outputKeys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">outputs</span><span class="p">),</span>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">outputKeys</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">types</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">outputs</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">types</span><span class="p">);</span>
<span class="c1">//outputs: { x: 1, y: [2,3], z: null }</span>
<span class="c1">//log: { x: integer, y: array, z: null }</span>
</code></pre>

<p>Get the raw output object. This will be a single object with all the output properties emitted by the module, which should match the outputs defined in that module&rsquo;s <code class="prettyprint">meta.json:outputs</code> section.</p>

<h1 id="miscellaneous">Miscellaneous</h1>

<h2 id="debugging-your-app-when-it-is-live">Debugging your app when it is live</h2>

<p>Modules send messages to the Dexter logging component and those messages will appear in your developer console when your app is executing. In chrome, you should open up developer tools to view the messages; in firefox, you can use firebug or the native tools. </p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
